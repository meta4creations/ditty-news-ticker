(()=>{"use strict";var e={n:t=>{var l=t&&t.__esModule?()=>t.default:()=>t;return e.d(l,{a:l}),l},d:(t,l)=>{for(var n in l)e.o(l,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:l[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=window.wp.blocks,l=window.React,n=window.wp.i18n,r=window.wp.blockEditor,o=window.wp.components,a=window.wp.serverSideRender;var i=e.n(a);const s=window.wp.data,d=({controlType:e="token",postType:t,label:r=(0,n.__)("Select Posts","madden-theme"),help:a,placeholder:i,value:d,onChange:c,valueKey:p="id"})=>{const{posts:u}=(0,s.useSelect)(e=>{const{getEntityRecords:l}=e("core");return{posts:l("postType",t,{per_page:-1,orderby:"title",order:"asc"})}}),m=u?u.map(e=>({value:e[p],label:e.title.rendered})):[];return i&&m.unshift({value:"",label:i}),(0,l.createElement)(l.Fragment,null,!u&&(0,l.createElement)(o.Spinner,null),!!u&&"token"===e&&(0,l.createElement)(o.FormTokenField,{label:r,value:d?d.map(e=>e.title.replace("&amp;","&")):[],suggestions:u?u.map(e=>e.title.rendered.replace("&amp;","&")):[],onChange:e=>(e=>{const t=e.reduce((e,t)=>{let l=u.find(e=>e.title.rendered.replace("&amp;","&")==t.replace("&amp;","&"));return l&&e.push({id:l.id,slug:l.slug,title:l.title.rendered}),e},[]);c(t)})(e)}),!!u&&"select"===e&&(0,l.createElement)(o.SelectControl,{__next40pxDefaultSize:!0,label:r,help:a,options:m,value:d,onChange:e=>{(e=>{if(e&&""!==e){let t=u.find(t=>String(t[p])===String(e)),l=Array.isArray(d)?[...d]:[];l.push({id:t.id,slug:t.slug,title:t.title.rendered}),c(l)}else c(!1);document.activeElement.blur()})(e)}}))},c=JSON.parse('{"UU":"ditty/posts-feed"}');(0,t.registerBlockType)(c.UU,{edit:function({attributes:e,setAttributes:t}){const{limit:a,layout:s}=e,c=(0,r.useBlockProps)({className:"ditty-posts-feed"});return(0,l.createElement)(l.Fragment,null,(0,l.createElement)(r.InspectorControls,null,(0,l.createElement)(o.PanelBody,{title:(0,n.__)("Posts Feed Settings","ditty-news-ticker")},(0,l.createElement)(o.RangeControl,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,label:(0,n.__)("Number of Posts","ditty-news-ticker"),help:(0,n.__)("Set the number of Posts to display","ditty-news-ticker"),value:a,onChange:e=>t({limit:e}),min:1,max:20}),(0,l.createElement)(o.PanelRow,null,(0,l.createElement)(d,{controlType:"select",postType:"ditty_layout",label:(0,n.__)("Layout","ditty-news-ticker"),help:(0,n.__)("Select a layout to format the posts","ditty-news-ticker"),placeholder:(0,n.__)("Select a Layout","ditty-news-ticker"),value:s,onChange:e=>{t({layout:e?Number(e[0].id):0})}})))),(0,l.createElement)("div",{...c},(0,l.createElement)(i(),{block:"ditty/posts-feed",attributes:e})))},save:function(){return null}})})();