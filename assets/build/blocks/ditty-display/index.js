(()=>{"use strict";const e=window.React,t=window.wp.blocks,i=window.wp.data,n=window.wp.blockEditor,l=window.wp.components,a=window.wp.primitives,r=window.wp.i18n,o=window.wp.element,s=(t="ticker")=>{const i={ticker:(0,e.createElement)(l.SVG,{xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 0 48 48"},(0,e.createElement)(l.Path,{d:"M4 20h28v8H4v-8zm32 4l8-6v12l-8-6z"})),carousel:(0,e.createElement)(l.SVG,{xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 0 48 48"},(0,e.createElement)(l.Path,{d:"M10 12h28v24H10V12zM2 18h6v12H2V18zm38 0h6v12h-6V18z"}))};return i?.[t]},c=function({name:a,onSelect:c}){const d=(0,i.useSelect)(e=>e(t.store).getBlockVariations(a,"block"),[a]),m=(0,n.useBlockProps)({className:"wp-block-metaphorcreations-ditty-display__placeholder"});return(0,o.useEffect)(()=>{d&&1===d.length&&c(d[0])},[c,d]),(0,e.createElement)("div",{...m},(0,e.createElement)(l.Placeholder,{instructions:(0,r.__)("Create a dynamic display. Select a layout:","ditty-news-ticker")},(0,e.createElement)("ul",{role:"list",className:"wp-block-metaphorcreations-ditty-display__variations","aria-label":(0,r.__)("Block variations","ditty-news-ticker")},d.map(t=>(0,e.createElement)("li",{key:t.name},(0,e.createElement)(l.Button,{__next40pxDefaultSize:!0,variant:"tertiary",icon:s(t.name),iconSize:48,onClick:()=>c(t),className:"wp-block-metaphorcreations-ditty-display__variation-button",label:`${t.title}: ${t.description}`}))))))},{__}=wp.i18n,d=[["ditty/display-item"],["ditty/display-item"],["ditty/display-item"]],m=JSON.parse('{"UU":"ditty/display"}'),p=(0,e.createElement)(l.SVG,{xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 0 48 48"},(0,e.createElement)(l.Path,{d:"M4 20h28v8H4v-8zm32 4l8-6v12l-8-6z"})),w=(0,e.createElement)(l.SVG,{xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 0 48 48"},(0,e.createElement)(l.Path,{d:"M10 12h28v24H10V12zM2 18h6v12H2V18zm38 0h6v12h-6V18z"})),h=[{name:"ticker",title:(0,r.__)("Ticker","ditty-news-ticker"),description:(0,r.__)("A continuously scrolling ticker display.","ditty-news-ticker"),attributes:{type:"ticker",style:{spacing:{blockGap:"25px"}}},isDefault:!0,scope:["block","inserter","transform"],isActive:e=>"ticker"===e.type,icon:p,innerBlocks:[["ditty/display-item"],["ditty/display-item"],["ditty/display-item"]]},{name:"carousel",title:(0,r.__)("Carousel","ditty-news-ticker"),description:(0,r.__)("A carousel/slider display.","ditty-news-ticker"),attributes:{type:"list",style:{spacing:{blockGap:"25px"}}},scope:["block","inserter","transform"],isActive:e=>"list"===e.type,icon:w,innerBlocks:[["ditty/display-item"],["ditty/display-item"],["ditty/display-item"]]}],y=(0,e.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"},(0,e.createElement)("path",{d:"M4 6h16v2H4V6zm0 5h16v2H4v-2zm0 5h16v2H4v-2z"}));(0,t.registerBlockType)(m.UU,{icon:y,variations:h,edit:function({attributes:t,setAttributes:r,clientId:s,name:m}){const{type:p,direction:w,speed:h,hoverPause:y,cloneItems:k,itemMaxWidth:u,itemElementsWrap:g,minHeight:v,fillHeight:b}=t,{hasInnerBlocks:E}=(0,i.useSelect)(e=>{const{getBlocks:t}=e(n.store);return{hasInnerBlocks:t(s).length>0}},[s]),B={};"ticker"===p&&("up"===w||"down"===w)&&(b&&(B.flexDirection="column",B.flex="1",B.height="100%"),v&&(B.minHeight=v));const _=(0,n.useBlockProps)({className:`ditty-display-editor ditty-display-type-${p}`,style:B}),[x,C]=function({attributes:e={},hasInnerBlocks:t=!1}){const{style:i,backgroundColor:n,textColor:l}=e,[a,r]=(0,o.useState)(!(t||n||l||i));return(0,o.useEffect)(()=>{(t||n||l||i)&&r(!1)},[n,l,i,t]),[a,r]}({attributes:t,hasInnerBlocks:E}),f=(0,n.useInnerBlocksProps)(_,{allowedBlocks:["ditty/display-item"],template:d,templateLock:!1,renderAppender:n.InnerBlocks.ButtonBlockAppender}),{selectBlock:S}=(0,i.useDispatch)(n.store);return(0,e.createElement)(e.Fragment,null,(0,e.createElement)(n.InspectorControls,null,(0,e.createElement)(l.PanelBody,{title:__("Display Settings","ditty-news-ticker"),initialOpen:!0},(0,e.createElement)(l.SelectControl,{label:__("Direction","ditty-news-ticker"),value:w,options:"ticker"===p?[{label:__("Left","ditty-news-ticker"),value:"left"},{label:__("Right","ditty-news-ticker"),value:"right"},{label:__("Up","ditty-news-ticker"),value:"up"},{label:__("Down","ditty-news-ticker"),value:"down"}]:[{label:__("Left","ditty-news-ticker"),value:"left"},{label:__("Right","ditty-news-ticker"),value:"right"}],onChange:e=>r({direction:e}),__nextHasNoMarginBottom:!0}),(0,e.createElement)(l.RangeControl,{label:__("Speed","ditty-news-ticker"),value:h,onChange:e=>r({speed:e}),min:1,max:100}),(0,e.createElement)(l.ToggleControl,{label:__("Pause on Hover","ditty-news-ticker"),checked:y,onChange:e=>r({hoverPause:e})}),"ticker"===p&&(0,e.createElement)(l.ToggleControl,{label:__("Clone Items","ditty-news-ticker"),help:__("Clone items for seamless looping","ditty-news-ticker"),checked:k,onChange:e=>r({cloneItems:e})}),"ticker"===p&&("up"===w||"down"===w)&&(0,e.createElement)(e.Fragment,null,(0,e.createElement)(l.ToggleControl,{label:__("Fill Parent Height","ditty-news-ticker"),help:__("Stretch ticker to match parent container height","ditty-news-ticker"),checked:b,onChange:e=>r({fillHeight:e})}),(0,e.createElement)(l.__experimentalUnitControl,{label:__("Min Height","ditty-news-ticker"),value:v,onChange:e=>r({minHeight:e})}))),(0,e.createElement)(l.PanelBody,{title:__("Item Settings","ditty-news-ticker"),initialOpen:!1},(0,e.createElement)(l.__experimentalUnitControl,{label:__("Max Width","ditty-news-ticker"),value:u,onChange:e=>r({itemMaxWidth:e})}),(0,e.createElement)(l.SelectControl,{label:__("Text Wrap","ditty-news-ticker"),value:g,options:[{label:__("No Wrap","ditty-news-ticker"),value:"nowrap"},{label:__("Wrap","ditty-news-ticker"),value:"wrap"}],onChange:e=>r({itemElementsWrap:e})}))),x&&(0,e.createElement)(a.View,null,f.children,(0,e.createElement)(c,{name:m,onSelect:e=>{r(e.attributes),S(s,-1),C(!1)}})),!x&&(0,e.createElement)("div",{...f}))},save:function(){return(0,e.createElement)(n.InnerBlocks.Content,null)}})})();