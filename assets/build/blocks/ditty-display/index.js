(()=>{"use strict";const e=window.React,t=window.wp.blocks,i=window.wp.data,n=window.wp.blockEditor,l=window.wp.components,a=window.wp.primitives,r=window.wp.i18n,s=window.wp.element,o=(t="ticker")=>{const i={ticker:(0,e.createElement)(l.SVG,{xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 0 48 48"},(0,e.createElement)(l.Path,{d:"M4 20h28v8H4v-8zm32 4l8-6v12l-8-6z"})),carousel:(0,e.createElement)(l.SVG,{xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 0 48 48"},(0,e.createElement)(l.Path,{d:"M10 12h28v24H10V12zM2 18h6v12H2V18zm38 0h6v12h-6V18z"}))};return i?.[t]},c=function({name:a,onSelect:c}){const d=(0,i.useSelect)(e=>e(t.store).getBlockVariations(a,"block"),[a]),p=(0,n.useBlockProps)({className:"wp-block-metaphorcreations-ditty-display__placeholder"});return(0,s.useEffect)(()=>{d&&1===d.length&&c(d[0])},[c,d]),(0,e.createElement)("div",{...p},(0,e.createElement)(l.Placeholder,{instructions:(0,r.__)("Create a dynamic display. Select a layout:","ditty-news-ticker")},(0,e.createElement)("ul",{role:"list",className:"wp-block-metaphorcreations-ditty-display__variations","aria-label":(0,r.__)("Block variations","ditty-news-ticker")},d.map(t=>(0,e.createElement)("li",{key:t.name},(0,e.createElement)(l.Button,{__next40pxDefaultSize:!0,variant:"tertiary",icon:o(t.name),iconSize:48,onClick:()=>c(t),className:"wp-block-metaphorcreations-ditty-display__variation-button",label:`${t.title}: ${t.description}`}))))))},{__}=wp.i18n,d=[["ditty/display-item"],["ditty/display-item"],["ditty/display-item"]],p=JSON.parse('{"UU":"ditty/display"}'),m=(0,e.createElement)(l.SVG,{xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 0 48 48"},(0,e.createElement)(l.Path,{d:"M4 20h28v8H4v-8zm32 4l8-6v12l-8-6z"})),w=(0,e.createElement)(l.SVG,{xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 0 48 48"},(0,e.createElement)(l.Path,{d:"M10 12h28v24H10V12zM2 18h6v12H2V18zm38 0h6v12h-6V18z"})),y=[{name:"ticker",title:(0,r.__)("Ticker","ditty-news-ticker"),description:(0,r.__)("A continuously scrolling ticker display.","ditty-news-ticker"),attributes:{type:"ticker",style:{spacing:{blockGap:"25px"}}},isDefault:!0,scope:["block","inserter","transform"],isActive:e=>"ticker"===e.type,icon:m,innerBlocks:[["ditty/display-item"],["ditty/display-item"],["ditty/display-item"]]},{name:"carousel",title:(0,r.__)("Carousel","ditty-news-ticker"),description:(0,r.__)("A carousel/slider display.","ditty-news-ticker"),attributes:{type:"list",style:{spacing:{blockGap:"25px"}}},scope:["block","inserter","transform"],isActive:e=>"list"===e.type,icon:w,innerBlocks:[["ditty/display-item"],["ditty/display-item"],["ditty/display-item"]]}],h=(0,e.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"},(0,e.createElement)("path",{d:"M4 6h16v2H4V6zm0 5h16v2H4v-2zm0 5h16v2H4v-2z"}));(0,t.registerBlockType)(p.UU,{icon:h,variations:y,edit:function({attributes:t,setAttributes:r,clientId:o,name:p}){const{type:m,direction:w,speed:y,hoverPause:h,cloneItems:k,itemMaxWidth:u,itemElementsWrap:v}=t,{hasInnerBlocks:g}=(0,i.useSelect)(e=>{const{getBlocks:t}=e(n.store);return{hasInnerBlocks:t(o).length>0}},[o]),E=(0,n.useBlockProps)({className:`ditty-display-editor ditty-display-type-${m}`}),[b,B]=function({attributes:e={},hasInnerBlocks:t=!1}){const{style:i,backgroundColor:n,textColor:l}=e,[a,r]=(0,s.useState)(!(t||n||l||i));return(0,s.useEffect)(()=>{(t||n||l||i)&&r(!1)},[n,l,i,t]),[a,r]}({attributes:t,hasInnerBlocks:g}),_=(0,n.useInnerBlocksProps)(E,{allowedBlocks:["ditty/display-item"],template:d,templateLock:!1,renderAppender:n.InnerBlocks.ButtonBlockAppender}),{selectBlock:x}=(0,i.useDispatch)(n.store);return(0,e.createElement)(e.Fragment,null,(0,e.createElement)(n.InspectorControls,null,(0,e.createElement)(l.PanelBody,{title:__("Display Settings","ditty-news-ticker"),initialOpen:!0},(0,e.createElement)(l.SelectControl,{label:__("Direction","ditty-news-ticker"),value:w,options:[{label:__("Left","ditty-news-ticker"),value:"left"},{label:__("Right","ditty-news-ticker"),value:"right"}],onChange:e=>r({direction:e}),__nextHasNoMarginBottom:!0}),(0,e.createElement)(l.RangeControl,{label:__("Speed","ditty-news-ticker"),value:y,onChange:e=>r({speed:e}),min:1,max:100}),(0,e.createElement)(l.ToggleControl,{label:__("Pause on Hover","ditty-news-ticker"),checked:h,onChange:e=>r({hoverPause:e})}),"ticker"===m&&(0,e.createElement)(l.ToggleControl,{label:__("Clone Items","ditty-news-ticker"),help:__("Clone items for seamless looping","ditty-news-ticker"),checked:k,onChange:e=>r({cloneItems:e})})),(0,e.createElement)(l.PanelBody,{title:__("Item Settings","ditty-news-ticker"),initialOpen:!1},(0,e.createElement)(l.TextControl,{label:__("Max Width","ditty-news-ticker"),value:u,onChange:e=>r({itemMaxWidth:e}),placeholder:__("e.g. 300px","ditty-news-ticker")}),(0,e.createElement)(l.SelectControl,{label:__("Text Wrap","ditty-news-ticker"),value:v,options:[{label:__("No Wrap","ditty-news-ticker"),value:"nowrap"},{label:__("Wrap","ditty-news-ticker"),value:"wrap"}],onChange:e=>r({itemElementsWrap:e})}))),b&&(0,e.createElement)(a.View,null,_.children,(0,e.createElement)(c,{name:p,onSelect:e=>{r(e.attributes),x(o,-1),B(!1)}})),!b&&(0,e.createElement)("div",{..._}))},save:function(){return(0,e.createElement)(n.InnerBlocks.Content,null)}})})();