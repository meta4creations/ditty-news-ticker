jQuery(document).ready(function($){function t(t,e){$("#mtphr-dnt-"+e+"-metaboxes > div").stop(!0,!0).hide();for(var i=t.attr("metabox").split(" "),n=0;n<i.length;n++)$("#"+i[n]).show();t.siblings("a").removeClass("button-primary"),t.addClass("button-primary"),t.siblings("input").val(t.attr("href").substring(1))}function e(t){t.find("input").is(":checked")?t.next().fadeOut():t.next().fadeIn()}var i=$("#mtphr-dnt-settings-select"),n=$("#wpadminbar");i.mtphr_dnt_affix({offset:{top:function(){return $(window).width()<601?this.top=i.offset().top+5:this.top=i.offset().top-n.height()+5}}}),$(".mtphr-dnt-metabox-group-toggle").click(function(t){t.preventDefault();var e=$(this).attr("href");$(".mtphr-dnt-metabox-group-toggle").removeClass("active"),$(".mtphr-dnt-metabox-group").removeClass("active"),$(this).addClass("active"),$(e).addClass("active"),$('input[name="_mtphr_dnt_admin_tab"]').val(e)}),$(".mtphr-dnt-codemirror-css").each(function(){var t=$(this).children("textarea");CodeMirror.fromTextArea(t[0],{mode:"css",lineNumbers:!0,lineWrapping:!0,viewportMargin:1/0})}),$(".mtphr-dnt-codemirror-js").each(function(){var t=$(this).children("textarea");CodeMirror.fromTextArea(t[0],{mode:"htmlmixed",lineNumbers:!0,lineWrapping:!0}).setSize(!1,140)}),$(".mtphr-dnt-code-select").click(function(t){t.preventDefault();var e=$(this).siblings("pre"),i,n,r=e[0];$.browser.msie?(i=document.body.createTextRange(),i.moveToElementText(r),i.select()):$.browser.mozilla||$.browser.opera?(n=window.getSelection(),i=document.createRange(),i.selectNodeContents(r),n.removeAllRanges(),n.addRange(i)):($.browser.safari||$.browser.chrome)&&(n=window.getSelection(),n.setBaseAndExtent(r,0,r,1))}),$('input[name="_mtphr_dnt_admin_javascript"]').length&&$('input[name="_mtphr_dnt_admin_javascript"]').val("ok"),$(".mtphr-dnt-type-toggle.button-primary").length&&t($(".mtphr-dnt-type-toggle.button-primary"),"type"),$(".mtphr-dnt-mode-toggle.button-primary").length&&t($(".mtphr-dnt-mode-toggle.button-primary"),"mode"),$(".mtphr-dnt-type-toggle").click(function(e){e.preventDefault(),$(this).hasClass("button-primary")||t($(this),"type")}),$(".mtphr-dnt-mode-toggle").click(function(e){e.preventDefault(),$(this).hasClass("button-primary")||t($(this),"mode")}),$(".mtphr-dnt-sort").length>0&&($(".mtphr-dnt-sort").sortable({handle:".mtphr-dnt-sort-heading",items:".mtphr-dnt-sort-item",axis:"y",opacity:.7,placeholder:{element:function(t){var e=$(t).innerHeight();return $('<div class="mtphr-dnt-sort-placeholder" style="height:'+e+'px;"></div>')[0]},update:function(){}},helper:function(t,e){var i=e.children(),n=e.clone();return n.children().each(function(t){$(this).width(i.eq(t).width()),$(this).height(i.eq(t).height())}),n}}),$(".mtphr-dnt-sort-heading.optional").live("click",function(t){t.preventDefault();var e=$(this).parents(".mtphr-dnt-sort-item"),i=$(this).next(".mtphr-dnt-sort-item-fields"),n=$(this).children("input");e.hasClass("active")?(e.removeClass("active"),n.val("off"),i.length&&i.stop(!0,!0).slideUp(1e3,"easeOutQuint")):(e.addClass("active"),n.val("on"),i.length&&i.stop(!0,!0).slideDown(1e3,"easeOutQuint"))})),$(".mtphr-dnt-list").mtphr_dnt_list(),$(".mtphr-dnt-single-image").find(".mtphr-dnt-delete").live("click",function(t){t.preventDefault();var e=$(this).parent(),i=e.siblings(".mtphr-dnt-single-image-upload");e.siblings("input").val(""),e.remove(),i.show()}),$(".mtphr-dnt-single-image-upload").live("click",function(t){t.preventDefault();var e=$(this),i=e.parent(),n=i.children("input"),r;return r?void r.open():(r=wp.media({title:ditty_news_ticker_vars.img_title,button:{text:ditty_news_ticker_vars.img_button,size:"small"},multiple:!1,library:{type:"image"}}),r.on("select",function(){var t=r.state().get("selection").toJSON();if(t.length>0){n.val(t[0].id);var a={action:"mtphr_dnt_single_image_ajax",attachment:t[0],security:ditty_news_ticker_vars.security};jQuery.post(ajaxurl,a,function(t){e.hide(),i.append(t)})}}),r.open(),!1)});var r={content:{attr:"data-tooltip"},style:{classes:"qtip-light qtip-rounded qtip-shadow"}};$('.mtphr-dnt-help[data-tooltip!=""]').qtip(r),$("body").on("click",'.mtphr-dnt-help[data-tooltip!=""]',function(t){t.preventDefault()}),$(".mtphr-dnt-list-field-mtphr_dnt_mixed_ticks_all").find("input").live("click",function(){e($(this).parents(".mtphr-dnt-list-field-mtphr_dnt_mixed_ticks_all"))}),$(".mtphr-dnt-list-field-mtphr_dnt_mixed_ticks_all").each(function(){e($(this))})}),function($){var t={init:function(t){return this.each(function(){function e(){a.find(".mtphr-dnt-list-item").length>1?(a.find(".mtphr-dnt-list-handle").show(),a.find(".mtphr-dnt-list-delete").show()):(a.find(".mtphr-dnt-list-handle").hide(),a.find(".mtphr-dnt-list-delete").hide())}function i(){a.find(".mtphr-dnt-list-item").each(function(t){$(this).find("textarea, input, select").each(function(){var e,i;if($(this).hasClass("wp-editor-area")){var n=$(this).parents(".mtphr-dnt-field-type-wysiwyg");e=n.attr("data-name"),i=n.attr("data-key")}else e=$(this).attr("data-name"),i=$(this).attr("data-key");e&&i&&$(this).attr("name",e+"["+t+"]["+i+"]")})}),e()}function n(t,e){var n=t.clone();n.find("textarea, input, select").each(function(){"checkbox"===$(this).attr("type")||"radio"===$(this).attr("type")?$(this).removeAttr("checked"):$(this).val("")}),n.find("textarea").each(function(){if($(this).hasClass("wp-editor-area")){var t=$(this).parents(".mtphr-dnt-field-type-wysiwyg"),e=t.attr("data-name");t.children(".wp-core-ui").remove();var n={action:"mtphr_dnt_wysiwyg_ajax",name:e,security:ditty_news_ticker_vars.security};jQuery.post(ajaxurl,n,function(e){var n=$(e),r=n.find("textarea").attr("id");t.append(e),"object"==typeof tinyMCE&&"function"==typeof tinyMCE.execCommand&&tinyMCE.execCommand("mceAddEditor",!1,r),i()})}}),n.hide(),t.after(n),n.fadeIn().addClass(e),n.find('.mtphr-dnt-help[data-tooltip!=""]').qtip(s),i(),a.trigger("mtphr_dnt_list_item_added",[n,e])}var r={};t&&$.extend(r,t);var a=$(this),s={content:{attr:"data-tooltip"},style:{classes:"qtip-light qtip-rounded qtip-shadow"}};a.sortable({handle:".mtphr-dnt-list-heading",items:".mtphr-dnt-list-item",axis:"y",opacity:.7,placeholder:{element:function(t){var e=$(t).innerHeight();return $('<div class="mtphr-dnt-sort-placeholder" style="height:'+e+'px;"></div>')[0]},update:function(){}},helper:function(t,e){var i=e.children(),n=e.clone();return n.children().each(function(t){$(this).width(i.eq(t).width()),$(this).height(i.eq(t).height())}),n}}),a.find(".mtphr-dnt-list-delete").live("click",function(t){t.preventDefault(),$(this).parents(".mtphr-dnt-list-item").fadeOut(function(){$(this).remove(),i()})}),a.find(".mtphr-dnt-list-add").live("click",function(t){t.preventDefault(),n($(this).parents(".mtphr-dnt-list-item"))}),a.on("mtphr_dnt_list_add_item",function(t,e,i){n(e,i)}),i()})}};$.fn.mtphr_dnt_list=function(e){return t[e]?t[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void $.error("Method "+e+" does not exist in mtphr_dnt_list"):t.init.apply(this,arguments)}}(jQuery);