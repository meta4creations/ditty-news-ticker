"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}function _defineProperty(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function e(t,i){return t.__proto__=i,t})(e,t)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _possibleConstructorReturn(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?_assertThisInitialized(e):t}var TickRow=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"render",value:function e(){return React.createElement("li",null,React.createElement("i",{class:this.props.icon}),this.props.label)}}]),t}(React.Component),TickEditorBackground=function(e){function t(e){var i;return _classCallCheck(this,t),(i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).handleClick=i.handleClick.bind(_assertThisInitialized(i)),i}return _inherits(t,e),_createClass(t,[{key:"handleClick",value:function e(){}},{key:"render",value:function e(){return React.createElement("div",{class:"dnt-tick-editor__background",onClick:this.handleClick})}}]),t}(React.Component),TickEditorHeader=function(e){function t(e){var i;return _classCallCheck(this,t),(i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).handleBackClick=i.handleBackClick.bind(_assertThisInitialized(i)),i.handleCloseClick=i.handleCloseClick.bind(_assertThisInitialized(i)),i}return _inherits(t,e),_createClass(t,[{key:"handleCloseClick",value:function e(t){t.preventDefault(),this.props.closeTickEditor()}},{key:"handleBackClick",value:function e(t){t.preventDefault(),this.props.goBack()}},{key:"render",value:function e(){var t="selectType"!=this.props.view&&React.createElement("a",{class:"dnt-tick-editor__back",href:"#",onClick:this.handleBackClick},React.createElement("i",{class:"fal fa-arrow-square-left"}));return React.createElement("div",{class:"dnt-tick-editor__header"},React.createElement("i",{class:this.props.icon}),React.createElement("h2",null,this.props.heading),React.createElement("p",null,this.props.description),t,React.createElement("a",{class:"dnt-tick-editor__close",href:"#",onClick:this.handleCloseClick},React.createElement("i",{class:"fal fa-window-close"})))}}]),t}(React.Component),TickEditorTypeOption=function(e){function t(e){var i;return _classCallCheck(this,t),(i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).handleMouseOver=i.handleMouseOver.bind(_assertThisInitialized(i)),i.handleMouseOut=i.handleMouseOut.bind(_assertThisInitialized(i)),i.handleMouseClick=i.handleMouseClick.bind(_assertThisInitialized(i)),i}return _inherits(t,e),_createClass(t,[{key:"handleMouseOver",value:function e(){this.props.previewType(this.props.icon,this.props.type,this.props.label,this.props.description)}},{key:"handleMouseOut",value:function e(){this.props.previewType()}},{key:"handleMouseClick",value:function e(){this.props.selectType(this.props.type)}},{key:"render",value:function e(){return React.createElement("div",{class:this.props.isActive?"dnt-tick-editor__type-option active":"dnt-tick-editor__type-option"},React.createElement("div",{class:"dnt-tick-editor__type-option__link",onMouseOver:this.handleMouseOver,onMouseOut:this.handleMouseOut,onClick:this.handleMouseClick},React.createElement("i",{class:this.props.icon}),this.props.label))}}]),t}(React.Component),FieldText=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"render",value:function e(){return React.createElement("input",{type:"text",name:this.props.id})}}]),t}(React.Component),FieldTextarea=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"render",value:function e(){return React.createElement("textarea",{name:this.props.id,cols:this.props.cols,rows:this.props.rows})}}]),t}(React.Component);FieldTextarea.defaultProps={cols:60,rows:4};var FieldSelect=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"render",value:function e(){var t=Object.keys(this.props.options).map(function(e){return React.createElement("option",{value:e},this.props.options[e])},this);return React.createElement("select",{name:this.props.id},t)}}]),t}(React.Component),FieldCheckbox=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"render",value:function e(){return React.createElement("label",{htmlFor:this.props.id},React.createElement("input",{type:"checkbox",name:this.props.id,value:"on"})," ",this.props.label)}}]),t}(React.Component),TickEditorFields=function(e){function t(e){var i;return _classCallCheck(this,t),(i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).handleCloseClick=i.handleCloseClick.bind(_assertThisInitialized(i)),i}return _inherits(t,e),_createClass(t,[{key:"handleCloseClick",value:function e(t){t.preventDefault(),this.props.closeTickEditor()}},{key:"render",value:function e(){var t=ditty_news_ticker_vars.dnt_fields[this.props.type],i=Object.keys(t).map(function(e){var i=t[e].desc?React.createElement("div",{class:"dnt-tick-editor__field__desc"},t[e].desc):"",n=t[e].name?React.createElement("div",{class:"dnt-tick-editor__field__label"},React.createElement("h3",null,t[e].name),i):"",s=t[e].columns?t[e].columns:12,r="",c;if(t[e].type)switch(t[e].type){case"text":r=React.createElement(FieldText,t[e]);break;case"textarea":r=React.createElement(FieldTextarea,t[e]);break;case"select":r=React.createElement(FieldSelect,t[e]);break;case"checkbox":r=React.createElement(FieldCheckbox,t[e]);break}return React.createElement("div",{class:"dnt-tick-editor__field dnt-tick-editor__field--"+t[e].type+" dnt-columns--"+s},n,React.createElement("div",{class:"dnt-tick-editor__field__input"},r))},this);return React.createElement("div",{class:"dnt-tick-editor__content dnt-tick-editor__content--fields"},React.createElement("div",{class:"dnt-tick-editor__fields"},i),React.createElement("div",{class:"dnt-tick-editor__footer"},React.createElement("a",{class:"button button-secondary button-large",href:"#",onClick:this.handleCloseClick},ditty_news_ticker_vars.dnt_strings.cancel),React.createElement("a",{class:"button button-primary button-large",href:"#"},ditty_news_ticker_vars.dnt_strings.add_tick)))}}]),t}(React.Component),TickEditor=function(e){function t(e){var i;return _classCallCheck(this,t),(i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).defaultState={icon:"fas fa-exclamation-triangle",type:"",label:"Select a tick type",description:"Select a tick type below to learn what it does.",view:"selectType"},i.state=i.defaultState,i.previewType=i.previewType.bind(_assertThisInitialized(i)),i.selectType=i.selectType.bind(_assertThisInitialized(i)),i.goBack=i.goBack.bind(_assertThisInitialized(i)),i.closeTickEditor=i.closeTickEditor.bind(_assertThisInitialized(i)),i}return _inherits(t,e),_createClass(t,[{key:"previewType",value:function e(t,i,n,s){var r=t||this.defaultState.icon,c=i||this.defaultState.type,a=n||this.defaultState.label,o=s||this.defaultState.description;this.setState({icon:r,type:c,label:a,description:o})}},{key:"selectType",value:function e(t){this.setState(_defineProperty({view:ditty_news_ticker_vars.dnt_types[t].icon,type:ditty_news_ticker_vars.dnt_types[t].type,label:ditty_news_ticker_vars.dnt_types[t].label,description:ditty_news_ticker_vars.dnt_types[t].description,fields:""},"view","newTickFields"))}},{key:"goBack",value:function e(){var t,i=this.state.view;switch(this.state.view){case"newTickFields":i="selectType";break}this.setState({view:i})}},{key:"closeTickEditor",value:function e(){this.props.closeTickEditor()}},{key:"render",value:function e(){var t="";switch(this.state.view){case"selectType":var i=Object.keys(ditty_news_ticker_vars.dnt_types).map(function(e){return React.createElement(TickEditorTypeOption,_extends({},ditty_news_ticker_vars.dnt_types[e],{previewType:this.previewType,selectType:this.selectType,isActive:ditty_news_ticker_vars.dnt_types[e].type===this.state.type}))},this);t=React.createElement("div",{class:"dnt-tick-editor__content dnt-tick-editor__content--"+this.state.view},React.createElement("div",{class:"dnt-tick-editor__content__inner"},i));break;case"newTickFields":t=React.createElement(TickEditorFields,{type:this.state.type,closeTickEditor:this.closeTickEditor});break;case"editTickFields":t=React.createElement(TickEditorFields,{type:this.state.type,closeTickEditor:this.closeTickEditor});break}return React.createElement("div",{class:"dnt-tick-editor"},React.createElement(TickEditorBackground,null),React.createElement("div",{class:"dnt-tick-editor__container"},React.createElement(TickEditorHeader,{view:this.state.view,icon:this.state.icon,heading:this.state.label,description:this.state.description,goBack:this.goBack,closeTickEditor:this.closeTickEditor}),t))}}]),t}(React.Component),AddTickButton=function(e){function t(e){var i;return _classCallCheck(this,t),(i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).state={label:ditty_news_ticker_vars.dnt_strings.add_new_tick},i.handleClick=i.handleClick.bind(_assertThisInitialized(i)),i}return _inherits(t,e),_createClass(t,[{key:"handleClick",value:function e(t){t.preventDefault(),this.props.openTickEditor()}},{key:"render",value:function e(){return React.createElement("a",{class:"dnt-add-tick-button",href:"#",onClick:this.handleClick},this.state.label)}}]),t}(React.Component),TickerList=function(e){function t(e){var i;_classCallCheck(this,t),i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e));var n=Object.keys(ditty_news_ticker_vars.dnt_ticks).map(function(e){return React.createElement(TickRow,ditty_news_ticker_vars.dnt_types[e])},_assertThisInitialized(i));return i.state={editorOpen:!1,listItems:n},i.openTickEditor=i.openTickEditor.bind(_assertThisInitialized(i)),i.closeTickEditor=i.closeTickEditor.bind(_assertThisInitialized(i)),i.addTickRow=i.addTickRow.bind(_assertThisInitialized(i)),i}return _inherits(t,e),_createClass(t,[{key:"openTickEditor",value:function e(){this.setState({editorOpen:!0})}},{key:"closeTickEditor",value:function e(){this.setState({editorOpen:!1})}},{key:"addTickRow",value:function e(t){var i=this.state.listItems;Array.isArray(i)||(i=[]),i.push(React.createElement(TickRow,ditty_news_ticker_vars.dnt_types[t])),this.setState({listItems:i})}},{key:"render",value:function e(){return this.state.editorOpen?React.createElement("div",{class:"dnt-ticks"},React.createElement("ul",{class:"dnt-ticks__list"},this.state.listItems),React.createElement(AddTickButton,{openTickEditor:this.openTickEditor}),React.createElement(TickEditor,{closeTickEditor:this.closeTickEditor,addTickRow:this.addTickRow})):React.createElement("div",{class:"dnt-ticks"},React.createElement("ul",{class:"dnt-ticks__list"},this.state.listItems),React.createElement(AddTickButton,{openTickEditor:this.openTickEditor}))}}]),t}(React.Component);document.getElementById("dnt-ticks")&&wp.element.render(React.createElement(TickerList,null),document.getElementById("dnt-ticks"));