"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}function _defineProperty(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e}).apply(this,arguments)}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function e(t,i){return t.__proto__=i,t})(e,t)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _possibleConstructorReturn(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?_assertThisInitialized(e):t}var TickRow=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"render",value:function e(){return React.createElement("li",null,React.createElement("i",{class:this.props.icon}),this.props.label)}}]),t}(React.Component),TickEditorBackground=function(e){function t(e){var i;return _classCallCheck(this,t),(i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).handleClick=i.handleClick.bind(_assertThisInitialized(i)),i}return _inherits(t,e),_createClass(t,[{key:"handleClick",value:function e(){this.props.closeTickEditor()}},{key:"render",value:function e(){return React.createElement("div",{class:"dnt-tick-editor__background",onClick:this.handleClick})}}]),t}(React.Component),TickEditorHeader=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"render",value:function e(){return React.createElement("div",{class:"dnt-tick-editor__header"},React.createElement("i",{class:this.props.icon}),React.createElement("h2",null,this.props.heading),React.createElement("p",null,this.props.description))}}]),t}(React.Component),TickEditorTypeOption=function(e){function t(e){var i;return _classCallCheck(this,t),(i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).handleMouseOver=i.handleMouseOver.bind(_assertThisInitialized(i)),i.handleMouseOut=i.handleMouseOut.bind(_assertThisInitialized(i)),i.handleMouseClick=i.handleMouseClick.bind(_assertThisInitialized(i)),i}return _inherits(t,e),_createClass(t,[{key:"handleMouseOver",value:function e(){this.props.previewType(this.props.icon,this.props.type,this.props.label,this.props.description)}},{key:"handleMouseOut",value:function e(){this.props.previewType()}},{key:"handleMouseClick",value:function e(){this.props.selectType(this.props.type)}},{key:"render",value:function e(){return React.createElement("div",{class:this.props.isActive?"dnt-tick-editor__type-option active":"dnt-tick-editor__type-option"},React.createElement("div",{class:"dnt-tick-editor__type-option__link",onMouseOver:this.handleMouseOver,onMouseOut:this.handleMouseOut,onClick:this.handleMouseClick},React.createElement("i",{class:this.props.icon}),this.props.label))}}]),t}(React.Component),TypeFields=function(e){function t(e){var i;return _classCallCheck(this,t),(i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).handleMouseOver=i.handleMouseOver.bind(_assertThisInitialized(i)),i.handleMouseOut=i.handleMouseOut.bind(_assertThisInitialized(i)),i.handleMouseClick=i.handleMouseClick.bind(_assertThisInitialized(i)),i}return _inherits(t,e),_createClass(t,[{key:"handleMouseOver",value:function e(){this.props.previewType(this.props.icon,this.props.type,this.props.label,this.props.description)}},{key:"handleMouseOut",value:function e(){this.props.previewType()}},{key:"handleMouseClick",value:function e(){this.props.selectType(this.props.type)}},{key:"render",value:function e(){return React.createElement("div",{class:this.props.isActive?"dnt-type-selector__block active":"dnt-type-selector__block"},React.createElement("div",{class:"dnt-type-selector__block__link",onMouseOver:this.handleMouseOver,onMouseOut:this.handleMouseOut,onClick:this.handleMouseClick},React.createElement("i",{class:this.props.icon}),this.props.label))}}]),t}(React.Component),TickEditor=function(e){function t(e){var i;return _classCallCheck(this,t),(i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).defaultState={icon:"fas fa-exclamation-triangle",type:"",label:"Select a tick type",description:"Select a tick type below to learn what it does.",view:"select-type"},i.state=i.defaultState,i.previewType=i.previewType.bind(_assertThisInitialized(i)),i.selectType=i.selectType.bind(_assertThisInitialized(i)),i.closeTickEditor=i.closeTickEditor.bind(_assertThisInitialized(i)),i}return _inherits(t,e),_createClass(t,[{key:"previewType",value:function e(t,i,s,n){var r=t||this.defaultState.icon,c=i||this.defaultState.type,o=s||this.defaultState.label,a=n||this.defaultState.description;this.setState({icon:r,type:c,label:o,description:a})}},{key:"selectType",value:function e(t){this.setState(_defineProperty({view:ditty_news_ticker_vars.dnt_types[t].icon,type:ditty_news_ticker_vars.dnt_types[t].type,label:ditty_news_ticker_vars.dnt_types[t].label,description:ditty_news_ticker_vars.dnt_types[t].description,fields:""},"view","loading-fields"));var i,s=fetch("http://dittynewsticker.localhost/wp-json/dnt-api/v1/fields/default").then(function(e){console.log(e.json())})}},{key:"closeTickEditor",value:function e(){this.props.closeTickEditor()}},{key:"render",value:function e(){var t="";switch(this.state.view){case"select-type":var i=Object.keys(ditty_news_ticker_vars.dnt_types).map(function(e){return React.createElement(TickEditorTypeOption,_extends({},ditty_news_ticker_vars.dnt_types[e],{previewType:this.previewType,selectType:this.selectType,isActive:ditty_news_ticker_vars.dnt_types[e].type===this.state.type}))},this);t=React.createElement("div",{class:"dnt-tick-editor__content__inner"},i);break;case"loading-fields":t="LOADING FIELDS NOW";break;case"edit-fields":t="FIELDS HAVE LOADED!";break}if(this.state.view)return React.createElement("div",{class:"dnt-tick-editor"},React.createElement(TickEditorBackground,{closeTickEditor:this.closeTickEditor}),React.createElement("div",{class:"dnt-tick-editor__container"},React.createElement(TickEditorHeader,{icon:this.state.icon,heading:this.state.label,description:this.state.description}),React.createElement("div",{class:"dnt-tick-editor__content "+this.state.view},t)))}}]),t}(React.Component),AddTickButton=function(e){function t(e){var i;return _classCallCheck(this,t),(i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).state={label:ditty_news_ticker_vars.dnt_strings.add_new_tick},i.handleClick=i.handleClick.bind(_assertThisInitialized(i)),i}return _inherits(t,e),_createClass(t,[{key:"handleClick",value:function e(t){t.preventDefault(),this.props.openTickEditor()}},{key:"render",value:function e(){return React.createElement("a",{class:"dnt-add-tick-button",href:"#",onClick:this.handleClick},this.state.label)}}]),t}(React.Component),TickerList=function(e){function t(e){var i;_classCallCheck(this,t),i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e));var s=Object.keys(ditty_news_ticker_vars.dnt_ticks).map(function(e){return React.createElement(TickRow,ditty_news_ticker_vars.dnt_types[e])},_assertThisInitialized(i));return i.state={editorOpen:!1,listItems:s},i.openTickEditor=i.openTickEditor.bind(_assertThisInitialized(i)),i.closeTickEditor=i.closeTickEditor.bind(_assertThisInitialized(i)),i.addTickRow=i.addTickRow.bind(_assertThisInitialized(i)),i}return _inherits(t,e),_createClass(t,[{key:"openTickEditor",value:function e(){this.setState({editorOpen:!0})}},{key:"closeTickEditor",value:function e(){this.setState({editorOpen:!1})}},{key:"addTickRow",value:function e(t){var i=this.state.listItems;Array.isArray(i)||(i=[]),i.push(React.createElement(TickRow,ditty_news_ticker_vars.dnt_types[t])),this.setState({listItems:i})}},{key:"render",value:function e(){return this.state.editorOpen?React.createElement("div",{class:"dnt-ticks"},React.createElement("ul",{class:"dnt-ticks__list"},this.state.listItems),React.createElement(AddTickButton,{openTickEditor:this.openTickEditor}),React.createElement(TickEditor,{closeTickEditor:this.closeTickEditor,addTickRow:this.addTickRow})):React.createElement("div",{class:"dnt-ticks"},React.createElement("ul",{class:"dnt-ticks__list"},this.state.listItems),React.createElement(AddTickButton,{openTickEditor:this.openTickEditor}))}}]),t}(React.Component);document.getElementById("dnt-ticks")&&wp.element.render(React.createElement(TickerList,null),document.getElementById("dnt-ticks"));