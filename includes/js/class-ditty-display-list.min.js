!function($){"use strict";var t={id:0,title:"",display:0,status:"",spacing:30,paging:0,perPage:0,transition:"fade",transitionEase:"easeInOutQuint",transitionSpeed:1.5,autoplay:0,autoplayPause:0,autoplaySpeed:8,height:0,heightEase:"easeInOutQuint",heightSpeed:1.5,arrows:"none",arrowsIconColor:"",arrowsBgColor:"",arrowsPosition:"center",arrowsPadding:{},arrowsStatic:0,navPrev:'<i class="fas fa-angle-left"></i>',navNext:'<i class="fas fa-angle-right"></i>',bullets:"none",bulletsColor:"",bulletsColorActive:"",bulletsPosition:"bottomCenter",bulletsSpacing:2,bulletsPadding:{},bullet:"",maxWidth:"",bgColor:"",padding:{},margin:{},borderColor:"",borderStyle:{},borderWidth:{},borderRadius:{},contentsBgColor:"",contentsPadding:{},contentsBorderColor:"",contentsBorderStyle:{},contentsBorderWidth:{},contentsBorderRadius:{},pageBgColor:"",pagePadding:{},pageBorderColor:"",pageBorderStyle:{},pageBorderWidth:{},pageBorderRadius:{},itemTextColor:"",itemLinkColor:"",itemBgColor:"",itemBorderColor:"",itemBorderStyle:{},itemBorderWidth:{},itemBorderRadius:{},itemPadding:{},titleDisplay:"none",titleContentsSize:"stretch",titleContentsPosition:"start",titleElement:"h3",titleElementPosition:"start",titleElementVerticalPosition:"start",titleFontSize:"",titleLineHeight:"",titleMinWidth:"",titleMaxWidth:"",titleMinHeight:"",titleMaxHeight:"",titleColor:"",titleLinkColor:"",titleBgColor:"",titleMargin:{},titlePadding:{},titleBorderColor:"",titleBorderStyle:{},titleBorderWidth:{},titleBorderRadius:{},page:0,shuffle:0,showEditor:0,items:[]},i=function(i,e){this.displayType="list",this.elmt=i,this.$elmt=$(i),this.$title=null,this.$titleContents=null,this.$contents=null,this.settings=$.extend({},t,$.ditty_list.defaults,e),this.total=this.settings.items.length,this.totalPages=1,this.page=this.settings.page,this.pages=[],this.enabledItems=[],this.visibleItems=[],this.editItem=null,1===parseInt(this.settings.shuffle)&&this.shuffle(),this._init()};i.prototype={_init:function(){this.$elmt.removeClass("ditty--pre"),this.$elmt.addClass("ditty ditty-list"),this.$elmt.attr("data-id",this.settings.id),this.$elmt.attr("data-type",this.displayType),this.$elmt.attr("data-display",this.settings.display),this.$contents=$('<div class="ditty__contents"></div>'),this.$elmt.append(this.$contents),this.$title=$('<div class="ditty__title"></div>'),this.$titleContents=$('<div class="ditty__title__contents"></div>'),this.$title.append(this.$titleContents),this._styleDisplay(),this._styleTitle(),this._calculatePages(),this._initSlider(),this.settings.showEditor?dittyEditorInit(this):this.trigger("start_live_updates")},_initSlider:function(){var t=[];$.each(this.settings,(function(i,e){var s=i.replace("page","slide");t[s]=e})),t.slides=this.pages,this.$contents.ditty_slider(t),this.$contents.on("ditty_slider_init",{self:this},this._triggerInit),this.$contents.on("ditty_slider_update",{self:this},this._triggerUpdate),this.$contents.on("ditty_slider_after_slide_update",{self:this},this._triggerShowSlide)},_destroySlider:function(){this.$contents.ditty_slider&&(this.$contents.off("ditty_slider_init",{self:this},this._triggerInit),this.$contents.off("ditty_slider_update",{self:this},this._triggerUpdate),this.$contents.off("ditty_slider_after_slide_update",{self:this},this._triggerShowSlide),this.$contents.ditty_slider("destroy"))},_updateSlider:function(t){var i=t||this.$contents.ditty_slider("options","slide");this.$contents.ditty_slider("options","slides",this.settings.pages),this.$contents.ditty_slider("options","slide",-1),this.$contents.ditty_slider("showSlide",i)},_styleDisplay:function(){this.$elmt.css({maxWidth:this.settings.maxWidth,background:this.settings.bgColor,borderColor:this.settings.borderColor,borderStyle:this.settings.borderStyle}),this.$elmt.css(this.settings.borderRadius),this.$elmt.css(this.settings.borderWidth),this.$elmt.css(this.settings.margin),this.$elmt.css(this.settings.padding);const t=`.ditty[data-display="${this.settings.display}"]`;let i="";""!==this.settings.itemTextColor&&(i+=`${t} .ditty-item__elements{color:${this.settings.itemTextColor}}`),""!==this.settings.itemLinkColor&&(i+=`${t} .ditty-item__elements a{color:${this.settings.itemLinkColor}}`),dittyDisplayCss(i,this.settings.display)},_styleTitle:function(){this.$elmt.attr("data-title",this.settings.titleDisplay);const t=this.settings.titleContentsPosition?this.settings.titleContentsPosition:this.settings.titleElementPosition,i=this.settings.titleElementVerticalPosition?this.settings.titleElementVerticalPosition:this.settings.titleElementPosition;if(this.$elmt.attr("data-title_position",t),this.$elmt.attr("data-title_horizontal_position",this.settings.titleElementPosition),this.$elmt.attr("data-title_vertical_position",i),"none"===this.settings.titleDisplay)this.$title.remove();else{var e=$("<"+this.settings.titleElement+' class="ditty__title__element">'+this.settings.title+"</"+this.settings.titleElement+">");e.css({fontSize:this.settings.titleFontSize,lineHeight:this.settings.titleLineHeight,color:this.settings.titleColor,margin:0,padding:0}),e.find("*").css({color:this.settings.titleColor}),e.find("a").css({color:this.settings.titleLinkColor}),this.$titleContents.css({background:this.settings.titleBgColor,borderColor:this.settings.titleBorderColor,borderStyle:this.settings.titleBorderStyle,width:"auto"===this.settings.titleContentsSize?"auto":"100%",height:"auto"===this.settings.titleContentsSize?"auto":"100%",minWidth:this.settings.titleMinWidth,maxWidth:this.settings.titleMaxWidth,minHeight:this.settings.titleMinHeight,maxHeight:this.settings.titleMaxHeight}),this.$titleContents.css(this.settings.titleBorderRadius),this.$titleContents.css(this.settings.titleBorderWidth),this.$titleContents.css(this.settings.titlePadding),this.$title.css(this.settings.titleMargin),this.$titleContents.html(e),this.$elmt.prepend(this.$title)}},_styleItem:function(t){t.children(".ditty-item__elements").css({background:this.settings.itemBgColor,borderColor:this.settings.itemBorderColor,borderStyle:this.settings.itemBorderStyle}),t.children(".ditty-item__elements").css(this.settings.itemPadding),t.children(".ditty-item__elements").css(this.settings.itemBorderRadius),t.children(".ditty-item__elements").css(this.settings.itemBorderWidth),t.css({paddingBottom:this.settings.spacing+"px"})},_createPage:function(t){var i=this,e=$('<div class="ditty-list__page ditty-list__page--'+t+'"></div>'),s=this._getItemsByPageIndex(t);return $.each(s,(function(t,s){var n=$(s.html);i._styleItem(n),s.css&&dittyLayoutCss(s.css,s.layout_id),e.append(n)})),e.children().last().css({paddingBottom:0}),{id:"page"+parseInt(t+1),html:e,items:s}},_calculatePages:function(){var t=this,i=[];$.each(this.settings.items,(function(e,s){t._isItemEnabled(e)&&i.push(s)})),this.enabledItems=i,this.total=i.length,parseInt(this.settings.paging)&&parseInt(this.settings.perPage)>0?this.totalPages=Math.ceil(parseInt(this.total)/parseInt(this.settings.perPage)):this.totalPages=1,this.pages=[];for(var e=0;e<this.totalPages;e++)this.pages.push(this._createPage(e))},_getPageByItemIndex:function(t){return Math.ceil((parseInt(t)+1)/this.settings.perPage)-1},_getItemsByPageIndex:function(t){var i=this.enabledItems;if(parseInt(this.totalPages)>1){var e=parseInt(this.settings.perPage)*t,s=e+parseInt(this.settings.perPage);i=this.enabledItems.slice(e,s)}return i},shuffle:function(){for(var t,i,e=this.total-1;e>0;e--)i=Math.floor(Math.random()*(e+1)),t=this.settings.items[e],this.settings.items[e]=this.settings.items[i],this.settings.items[i]=t},_isItemEnabled:function(t){return void 0!==this.settings.items[parseInt(t)]&&(void 0===this.settings.items[parseInt(t)].is_disabled||!(this.settings.items[parseInt(t)].is_disabled.length>0))},_disabledItemsStatus:function(){var t=this,i={};return $.each(this.settings.items,(function(e,s){t._isItemEnabled(e)?i[s.id]="enabled":i[s.id]="disabled"})),i},addItemDisabled:function(t,i){},removeItemDisabled:function(t,i){},showItem:function(t){var i=[];if($.each(this.settings.items,(function(e,s){String(s.id)===String(t)&&i.push(e)})),0!==i.length){var e=this._getPageByItemIndex(parseInt(i[0]));this.$contents.ditty_slider("showSlide",e)}},addItem:function(t,i,e){if(!this.$contents.ditty_slider("options","slides").length){this.settings.items=[t],this._calculatePages();var s=this.pages[0];return this.$contents.ditty_slider("addSlide",s,0),!1}var n=this.settings.items.slice(),l=!0;(i>=this.total||i<0)&&(l=!1),"replace"===e&&l?n.splice(i,1,t):null===i||""===i?n.splice(parseInt(this.item)+1,0,t):i>=this.total?n.push(t):i<0?n.splice(0,0,t):n.splice(i,0,t),this.updateItems(n)},deleteItem:function(t){var i=[];$.each(this.settings.items,(function(e,s){String(s.id)!==String(t)&&i.push(s)})),this.updateItems(i)},loadItems:function(t=[],i="animate"){if(!t.length)return!1;if(!this.$contents.ditty_slider("options","slides").length){this.settings.items=t,this._calculatePages();var e=this.pages[0];return this.$contents.ditty_slider("addSlide",e,0),!1}const{updatedItems:s,updatedIndexes:n}=dittyGetUpdatedItemData(this.settings.items,t);this.settings.items=s,this.total=s.length,this._calculatePages(),this.$contents.ditty_slider("options","slides",this.pages);var l=this.$contents.ditty_slider("options","currentSlide"),a=l.children(".ditty-item"),r=this.$contents.ditty_slider("options","slide"),o=this.settings.paging&&1===parseInt(this.settings.paging)?parseInt(this.settings.perPage)*r:0,d=this.settings.paging&&1===parseInt(this.settings.paging)?parseInt(this.settings.perPage)*r+parseInt(this.settings.perPage)-1:a.length,h=[];let g=0;for(var c=o;c<=d;c++)if(-1!==n.indexOf(c)){const t=$(s[c].html);if(s[c].css&&dittyLayoutCss(s[c].css,s[c].layout_id,"update"),this._styleItem(t),a[g])h.push({currentItem:$(a[g]),newItem:t});else{var p=$('<div class="ditty-temp-item"></div>');l.append(p),h.push({currentItem:p,newItem:t})}g++}else g+o>=this.total&&(a[g]&&h.push({currentItem:$(a[g]),newItem:$('<div class="ditty-temp-item"></div>')}),g++);dittyUpdateItems(h,i),this.trigger("update")},updateItems:function(t,i,e,s){if(void 0===t)return!1;if(!this.$contents.ditty_slider("options","slides").length){this.settings.items=t,this._calculatePages();var n=this.pages[0];return this.$contents.ditty_slider("addSlide",n,0),!1}var l=this,a=this.$contents.ditty_slider("options","slide"),r=[];if(i){var o=this.settings.items.slice(),d=[],h=!1;$.each(o,(function(s,n){String(n.id)===String(i)?"after"===e?(d.push(n),$.each(t,(function(t,i){d.push(i)})),h=!0):"before"===e?($.each(t,(function(t,i){d.push(i)})),d.push(n),h=!0):h||($.each(t,(function(t,i){d.push(i),r.push(String(i.uniq_id))})),h=!0):d.push(n)})),h||($.each(this.settings.items,(function(t,i){d.push(i)})),h=!0),t=d}this.settings.items=t,this.total=t.length,this._calculatePages(),this.$contents.ditty_slider("options","slides",this.pages);var g=this.$contents.ditty_slider("options","currentSlide"),c=g.children(".ditty-item"),p=this.$contents.ditty_slider("options","slide"),m=[];if(a!==p)return!1;var u,_=0,y=null,f=-1,I=[];this.pages[p]&&(u=this.pages[p].items,_=u.length,$.each(u,(function(t,i){var e=$(i.html);if(i.css&&dittyLayoutCss(i.css,i.layout_id),l._styleItem(e),t===_-1&&e.css({paddingBottom:0}),c[t]){var n=$(c[t]);y=n,I.push(t),(s||String(n.data("item_uniq_id"))!==String(i.uniq_id)||r.includes(String(i.uniq_id)))&&m.push({currentItem:n,newItem:e})}else{var a=$('<div class="ditty-temp-item"></div>');g.append(a),m.push({currentItem:a,newItem:e}),f=parseInt(l.settings.spacing)}}))),$.each(c,(function(t){if(!I.includes(t)){var i=$(c[t]),e=$('<div class="ditty-temp-item"></div>');m.push({currentItem:i,newItem:e}),f=0}})),null!==y&&f>=0&&y.css({paddingBottom:f+"px"}),dittyUpdateItems(m),this.trigger("update")},getActiveItems:function(){return this._getItemsByPageIndex(this.page)},_triggerInit:function(t){t.data.self.trigger("init")},_triggerUpdate:function(t){t.data.self.trigger("update")},_triggerShowSlide:function(t,i){var e=t.data.self;e.page=i,e.trigger("active_items_update")},trigger:function(t){var i=[];switch(t){case"active_items_update":i=[this,this.getActiveItems()];break;case"disabled_items_update":i=[this._disabledItemsStatus()];break;case"start_live_updates":i=[this.settings.id];break;default:i=[this.settings,this.$elmt]}this.$elmt.trigger("ditty_"+t,i),"function"==typeof this.settings[t]&&this.settings[t].apply(this.$elmt,i),$("body").trigger("ditty_"+t,i)},_getOption:function(t){switch(t){case"ditty":return this;case"type":return this.displayType;case"display":return this.settings.display;case"items":return this.settings.items;default:return this.settings[t]}},_setOption:function(t,i){if(void 0===i)return!1;var e=t,s=i,n=!0,l=this;switch(t){case"items":n=!1,this.updateItems(i);break;case"perPage":case"paging":n=!1,this.settings[t]=i,this._calculatePages(),this.$contents.ditty_slider("options",{slides:this.pages,transitionSpeed:0,heightSpeed:0}),this.$contents.ditty_slider("showSlide"),this.$contents.ditty_slider("options",{transitionSpeed:this.settings.transitionSpeed,heightSpeed:this.settings.heightSpeed});break;case"spacing":this.settings[t]=i,this.$elmt.find(".ditty-item").each((function(){$(this).css({paddingBottom:l.settings.spacing+"px"})})),this.$elmt.find(".ditty-list__page").each((function(){$(this).children(".ditty-item:last-child").css({paddingBottom:0})}));break;case"title":case"titleDisplay":case"titleContentsSize":case"titleContentsPosition":case"titleElement":case"titleElementPosition":case"titleElementVerticalPosition":case"titleFontSize":case"titleLineHeight":case"titleMinWidth":case"titleMaxWidth":case"titleMinHeight":case"titleMaxHeight":case"titleColor":case"titleLinkColor":case"titleBgColor":case"titleMargin":case"titlePadding":case"titleBorderColor":case"titleBorderStyle":case"titleBorderWidth":case"titleBorderRadius":n=!1,this.settings[t]=i,this._styleTitle();break;case"maxWidth":case"bgColor":case"padding":case"margin":case"borderColor":case"borderStyle":case"borderWidth":case"borderRadius":case"itemTextColor":case"itemLinkColor":n=!1,this.settings[t]=i,this._styleDisplay();break;case"itemBgColor":case"itemBorderColor":case"itemBorderStyle":case"itemBorderWidth":case"itemBorderRadius":case"itemPadding":this.settings[t]=i,this.$elmt.find(".ditty-item").each((function(){l._styleItem($(this))}));break;default:this.settings[t]=i}n&&(e=e.replace("page","slide"),this.$contents.ditty_slider("options",e,s))},options:function(t,i){var e=this;if("object"==typeof t)$.each(t,(function(t,i){e._setOption(t,i)}));else{if("string"!=typeof t)return e.settings;if(void 0===i)return e._getOption(t);e._setOption(t,i)}},destroy:function(){this._destroySlider(),this.$elmt.removeClass("ditty ditty-list"),this.$elmt.removeAttr("data-id"),this.$elmt.removeAttr("data-type"),this.$elmt.removeAttr("data-display"),this.$elmt.removeAttr("style"),this.$elmt.empty(),this.elmt._ditty_list=null}},$.fn.ditty_list=function(t){var e,s=arguments,n=!1;if(void 0===t||"object"==typeof t)return this.each((function(){this._ditty_list||(this._ditty_list=new i(this,t))}));if("string"==typeof t){if(this.each((function(){var i=this._ditty_list;if(!i)throw new Error("No Ditty_List applied to this element.");"function"==typeof i[t]&&"_"!==t[0]?e=i[t].apply(i,[].slice.call(s,1)):n=!0})),n)throw new Error('No method "'+t+'" in Ditty_List.');return void 0!==e?e:this}},$.ditty_list={},$.ditty_list.defaults=t}(jQuery);