!function($){"use strict";var t={id:0,title:"",titleDisplay:"none",display:0,status:"",spacing:30,paging:0,perPage:0,transition:"fade",transitionEase:"easeInOutQuint",transitionSpeed:1.5,autoplay:0,autoplayPause:0,autoplaySpeed:8,height:0,heightEase:"easeInOutQuint",heightSpeed:1.5,arrows:"none",arrowsIconColor:"",arrowsBgColor:"",arrowsPosition:"center",arrowsPadding:{},arrowsStatic:0,navPrev:'<i class="fas fa-angle-left"></i>',navNext:'<i class="fas fa-angle-right"></i>',bullets:"none",bulletsColor:"",bulletsColorActive:"",bulletsPosition:"bottomCenter",bulletsSpacing:2,bulletsPadding:{},bullet:"",maxWidth:"",bgColor:"",padding:{},margin:{},borderColor:{},borderStyle:{},borderWidth:{},borderRadius:{},contentsBgColor:"",contentsPadding:{},contentsBorderColor:{},contentsBorderStyle:{},contentsBorderWidth:{},contentsBorderRadius:{},pageBgColor:"",pagePadding:{},pageBorderColor:{},pageBorderStyle:{},pageBorderWidth:{},pageBorderRadius:{},itemTextColor:"",itemBgColor:"",itemBorderColor:{},itemBorderStyle:{},itemBorderWidth:{},itemBorderRadius:{},itemPadding:{},page:0,shuffle:0,showEditor:0,items:[]},e=function(e,i){this.displayType="list",this.elmt=e,this.$elmt=$(e),this.settings=$.extend({},t,$.ditty_list.defaults,i),this.total=this.settings.items.length,this.totalPages=1,this.page=this.settings.page,this.pages=[],this.enabledItems=[],this.visibleItems=[],this.editItem=null,1===parseInt(this.settings.shuffle)&&this.shuffle(),this._init()};e.prototype={_init:function(){this.$elmt.removeClass("ditty--pre"),this.$elmt.addClass("ditty ditty-list"),this.$elmt.attr("data-id",this.settings.id),this.$elmt.attr("data-type",this.displayType),this.$elmt.attr("data-display",this.settings.display),this._calculatePages(),this._initSlider(),this.settings.showEditor?dittyEditorInit(this):this.trigger("start_live_updates")},_initSlider:function(){var t=[];$.each(this.settings,(function(e,i){var s=e.replace("page","slide");t[s]=i})),t.slides=this.pages,this.$elmt.ditty_slider(t),this.$elmt.on("ditty_slider_init",{self:this},this._triggerInit),this.$elmt.on("ditty_slider_update",{self:this},this._triggerUpdate),this.$elmt.on("ditty_slider_after_slide_update",{self:this},this._triggerShowSlide)},_destroySlider:function(){this.$elmt.ditty_slider&&(this.$elmt.off("ditty_slider_init",{self:this},this._triggerInit),this.$elmt.off("ditty_slider_update",{self:this},this._triggerUpdate),this.$elmt.off("ditty_slider_after_slide_update",{self:this},this._triggerShowSlide),this.$elmt.ditty_slider("destroy"))},_updateSlider:function(t){var e=t||this.$elmt.ditty_slider("options","slide");this.$elmt.ditty_slider("options","slides",this.settings.pages),this.$elmt.ditty_slider("options","slide",-1),this.$elmt.ditty_slider("showSlide",e)},_styleItem:function(t){t.children(".ditty-item__elements").css({color:this.settings.itemTextColor,backgroundColor:this.settings.itemBgColor,borderColor:this.settings.itemBorderColor,borderStyle:this.settings.itemBorderStyle}),t.children(".ditty-item__elements").css(this.settings.itemPadding),t.children(".ditty-item__elements").css(this.settings.itemBorderRadius),t.children(".ditty-item__elements").css(this.settings.itemBorderWidth),t.css({paddingBottom:this.settings.spacing+"px"})},_createPage:function(t){var e=this,i=$('<div class="ditty-list__page ditty-list__page--'+t+'"></div>'),s=this._getItemsByPageIndex(t);return $.each(s,(function(t,s){var n=$(s.html);e._styleItem(n),s.css&&dittyLayoutCss(s.css,s.layout_id),i.append(n)})),i.children().last().css({paddingBottom:0}),{id:"page"+parseInt(t+1),html:i,items:s}},_calculatePages:function(){var t=this,e=[];$.each(this.settings.items,(function(i,s){t._isItemEnabled(i)&&e.push(s)})),this.enabledItems=e,this.total=e.length,parseInt(this.settings.paging)&&parseInt(this.settings.perPage)>0?this.totalPages=Math.ceil(parseInt(this.total)/parseInt(this.settings.perPage)):this.totalPages=1,this.pages=[];for(var i=0;i<this.totalPages;i++)this.pages.push(this._createPage(i))},_getPageByItemIndex:function(t){return Math.ceil((parseInt(t)+1)/this.settings.perPage)-1},_getItemsByPageIndex:function(t){var e=this.enabledItems;if(parseInt(this.totalPages)>1){var i=parseInt(this.settings.perPage)*t,s=i+parseInt(this.settings.perPage);e=this.enabledItems.slice(i,s)}return e},shuffle:function(){for(var t,e,i=this.total-1;i>0;i--)e=Math.floor(Math.random()*(i+1)),t=this.settings.items[i],this.settings.items[i]=this.settings.items[e],this.settings.items[e]=t},_isItemEnabled:function(t){return void 0!==this.settings.items[parseInt(t)]&&(void 0===this.settings.items[parseInt(t)].is_disabled||!(this.settings.items[parseInt(t)].is_disabled.length>0))},_disabledItemsStatus:function(){var t=this,e={};return $.each(this.settings.items,(function(i,s){t._isItemEnabled(i)?e[s.id]="enabled":e[s.id]="disabled"})),e},addItemDisabled:function(t,e){},removeItemDisabled:function(t,e){},showItem:function(t){var e=[];if($.each(this.settings.items,(function(i,s){String(s.id)===String(t)&&e.push(i)})),0!==e.length){var i=this._getPageByItemIndex(parseInt(e[0]));this.$elmt.ditty_slider("showSlide",i)}},addItem:function(t,e,i){if(!this.$elmt.ditty_slider("options","slides").length){this.settings.items=[t],this._calculatePages();var s=this.pages[0];return this.$elmt.ditty_slider("addSlide",s,0),!1}var n=this.settings.items.slice(),a=!0;(e>=this.total||e<0)&&(a=!1),"replace"===i&&a?n.splice(e,1,t):null===e||""===e?n.splice(parseInt(this.item)+1,0,t):e>=this.total?n.push(t):e<0?n.splice(0,0,t):n.splice(e,0,t),this.updateItems(n)},deleteItem:function(t){var e=[];$.each(this.settings.items,(function(i,s){String(s.id)!==String(t)&&e.push(s)})),this.updateItems(e)},loadItems:function(t=[],e="animate"){if(!t.length)return!1;if(!this.$elmt.ditty_slider("options","slides").length){this.settings.items=t,this._calculatePages();var i=this.pages[0];return this.$elmt.ditty_slider("addSlide",i,0),!1}const{updatedItems:s,updatedIndexes:n}=dittyGetUpdatedItemData(this.settings.items,t);this.settings.items=s,this.total=s.length,this._calculatePages(),this.$elmt.ditty_slider("options","slides",this.pages);var a=this.$elmt.ditty_slider("options","currentSlide"),r=a.children(".ditty-item"),d=this.$elmt.ditty_slider("options","slide"),l=this.settings.paging&&1===parseInt(this.settings.paging)?parseInt(this.settings.perPage)*d:0,h=this.settings.paging&&1===parseInt(this.settings.paging)?parseInt(this.settings.perPage)*d+parseInt(this.settings.perPage)-1:r.length,o=[];let g=0;for(var p=l;p<=h;p++)if(-1!==n.indexOf(p)){const t=$(s[p].html);if(s[p].css&&dittyLayoutCss(s[p].css,s[p].layout_id,"update"),this._styleItem(t),r[g])o.push({currentItem:$(r[g]),newItem:t});else{var m=$('<div class="ditty-temp-item"></div>');a.append(m),o.push({currentItem:m,newItem:t})}g++}else g+l>=this.total&&(r[g]&&o.push({currentItem:$(r[g]),newItem:$('<div class="ditty-temp-item"></div>')}),g++);dittyUpdateItems(o,e),this.trigger("update")},updateItems:function(t,e,i,s){if(void 0===t)return!1;if(!this.$elmt.ditty_slider("options","slides").length){this.settings.items=t,this._calculatePages();var n=this.pages[0];return this.$elmt.ditty_slider("addSlide",n,0),!1}var a=this,r=this.$elmt.ditty_slider("options","slide"),d=[];if(e){var l=this.settings.items.slice(),h=[],o=!1;$.each(l,(function(s,n){String(n.id)===String(e)?"after"===i?(h.push(n),$.each(t,(function(t,e){h.push(e)})),o=!0):"before"===i?($.each(t,(function(t,e){h.push(e)})),h.push(n),o=!0):o||($.each(t,(function(t,e){h.push(e),d.push(String(e.uniq_id))})),o=!0):h.push(n)})),o||($.each(this.settings.items,(function(t,e){h.push(e)})),o=!0),t=h}this.settings.items=t,this.total=t.length,this._calculatePages(),this.$elmt.ditty_slider("options","slides",this.pages);var g=this.$elmt.ditty_slider("options","currentSlide"),p=g.children(".ditty-item"),m=this.$elmt.ditty_slider("options","slide"),c=[];if(r!==m)return!1;var u,_=0,y=null,f=-1,I=[];this.pages[m]&&(u=this.pages[m].items,_=u.length,$.each(u,(function(t,e){var i=$(e.html);if(e.css&&dittyLayoutCss(e.css,e.layout_id),a._styleItem(i),t===_-1&&i.css({paddingBottom:0}),p[t]){var n=$(p[t]);y=n,I.push(t),(s||String(n.data("item_uniq_id"))!==String(e.uniq_id)||d.includes(String(e.uniq_id)))&&c.push({currentItem:n,newItem:i})}else{var r=$('<div class="ditty-temp-item"></div>');g.append(r),c.push({currentItem:r,newItem:i}),f=parseInt(a.settings.spacing)}}))),$.each(p,(function(t){if(!I.includes(t)){var e=$(p[t]),i=$('<div class="ditty-temp-item"></div>');c.push({currentItem:e,newItem:i}),f=0}})),null!==y&&f>=0&&y.css({paddingBottom:f+"px"}),dittyUpdateItems(c),this.trigger("update")},getActiveItems:function(){return this._getItemsByPageIndex(this.page)},_triggerInit:function(t){t.data.self.trigger("init")},_triggerUpdate:function(t){t.data.self.trigger("update")},_triggerShowSlide:function(t,e){var i=t.data.self;i.page=e,i.trigger("active_items_update")},trigger:function(t){var e=[];switch(t){case"active_items_update":e=[this,this.getActiveItems()];break;case"disabled_items_update":e=[this._disabledItemsStatus()];break;case"start_live_updates":e=[this.settings.id];break;default:e=[this.settings,this.$elmt]}this.$elmt.trigger("ditty_"+t,e),"function"==typeof this.settings[t]&&this.settings[t].apply(this.$elmt,e),$("body").trigger("ditty_"+t,e)},_getOption:function(t){switch(t){case"ditty":return this;case"type":return this.displayType;case"display":return this.settings.display;case"items":return this.settings.items;default:return this.settings[t]}},_setOption:function(t,e){if(void 0===e)return!1;var i=t,s=e,n=!0,a=this;switch(t){case"items":n=!1,this.updateItems(e);break;case"perPage":case"paging":this.settings[t]=e,this.updateItems(this.settings.items);break;case"spacing":this.settings[t]=e,this.$elmt.find(".ditty-item").each((function(){$(this).css({paddingBottom:a.settings.spacing+"px"})})),this.$elmt.find(".ditty-list__page").each((function(){$(this).children(".ditty-item:last-child").css({paddingBottom:0})}));break;case"itemTextColor":case"itemBgColor":case"itemBorderColor":case"itemBorderStyle":case"itemBorderWidth":case"itemBorderRadius":case"itemPadding":this.settings[t]=e,this.$elmt.find(".ditty-item").each((function(){a._styleItem($(this))}));break;default:this.settings[t]=e}n&&(i=i.replace("page","slide"),this.$elmt.ditty_slider("options",i,s))},options:function(t,e){var i=this;if("object"==typeof t)$.each(t,(function(t,e){i._setOption(t,e)}));else{if("string"!=typeof t)return i.settings;if(void 0===e)return i._getOption(t);i._setOption(t,e)}},destroy:function(){this._destroySlider(),this.$elmt.removeClass("ditty ditty-list"),this.$elmt.removeAttr("data-id"),this.$elmt.removeAttr("data-type"),this.$elmt.removeAttr("data-display"),this.$elmt.removeAttr("style"),this.$elmt.empty(),this.elmt._ditty_list=null}},$.fn.ditty_list=function(t){var i,s=arguments,n=!1;if(void 0===t||"object"==typeof t)return this.each((function(){this._ditty_list||(this._ditty_list=new e(this,t))}));if("string"==typeof t){if(this.each((function(){var e=this._ditty_list;if(!e)throw new Error("No Ditty_List applied to this element.");"function"==typeof e[t]&&"_"!==t[0]?i=e[t].apply(e,[].slice.call(s,1)):n=!0})),n)throw new Error('No method "'+t+'" in Ditty_List.');return void 0!==i?i:this}},$.ditty_list={},$.ditty_list.defaults=t}(jQuery);