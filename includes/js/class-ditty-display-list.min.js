!function($){"use strict";var t={id:0,title:"",titleDisplay:"none",display:0,status:"",spacing:30,paging:0,perPage:0,transition:"fade",transitionEase:"easeInOutQuint",transitionSpeed:1.5,autoplay:0,autoplayPause:0,autoplaySpeed:8,height:0,heightEase:"easeInOutQuint",heightSpeed:1.5,arrows:"none",arrowsIconColor:"",arrowsBgColor:"",arrowsPosition:"center",arrowsPadding:{},arrowsStatic:0,navPrev:'<i class="fas fa-angle-left"></i>',navNext:'<i class="fas fa-angle-right"></i>',bullets:"none",bulletsColor:"",bulletsColorActive:"",bulletsPosition:"bottomCenter",bulletsSpacing:2,bulletsPadding:{},bullet:"",maxWidth:"",bgColor:"",padding:{},margin:{},borderColor:{},borderStyle:{},borderWidth:{},borderRadius:{},contentsBgColor:"",contentsPadding:{},contentsBorderColor:{},contentsBorderStyle:{},contentsBorderWidth:{},contentsBorderRadius:{},pageBgColor:"",pagePadding:{},pageBorderColor:{},pageBorderStyle:{},pageBorderWidth:{},pageBorderRadius:{},itemTextColor:"",itemBgColor:"",itemBorderColor:{},itemBorderStyle:{},itemBorderWidth:{},itemBorderRadius:{},itemPadding:{},page:0,shuffle:0,showEditor:0,items:[]},i=function(i,e){this.displayType="list",this.elmt=i,this.$elmt=$(i),this.settings=$.extend({},t,$.ditty_list.defaults,e),this.total=this.settings.items.length,this.totalPages=1,this.page=this.settings.page,this.pages=[],this.enabledItems=[],this.visibleItems=[],this.editItem=null,1===parseInt(this.settings.shuffle)&&this.shuffle(),this._init()};i.prototype={_init:function(){this.$elmt.removeClass("ditty--pre"),this.$elmt.addClass("ditty ditty-list"),this.$elmt.attr("data-id",this.settings.id),this.$elmt.attr("data-type",this.displayType),this.$elmt.attr("data-display",this.settings.display),this._calculatePages(),this._initSlider(),this.settings.showEditor?dittyEditorInit(this):this.trigger("start_live_updates")},_initSlider:function(){var t=[];$.each(this.settings,(function(i,e){var s=i.replace("page","slide");t[s]=e})),t.slides=this.pages,this.$elmt.ditty_slider(t),this.$elmt.on("ditty_slider_init",{self:this},this._triggerInit),this.$elmt.on("ditty_slider_update",{self:this},this._triggerUpdate),this.$elmt.on("ditty_slider_after_slide_update",{self:this},this._triggerShowSlide)},_destroySlider:function(){this.$elmt.ditty_slider&&(this.$elmt.off("ditty_slider_init",{self:this},this._triggerInit),this.$elmt.off("ditty_slider_update",{self:this},this._triggerUpdate),this.$elmt.off("ditty_slider_after_slide_update",{self:this},this._triggerShowSlide),this.$elmt.ditty_slider("destroy"))},_updateSlider:function(t){var i=t||this.$elmt.ditty_slider("options","slide");this.$elmt.ditty_slider("options","slides",this.settings.pages),this.$elmt.ditty_slider("options","slide",-1),this.$elmt.ditty_slider("showSlide",i)},_styleItem:function(t){t.children(".ditty-item__elements").css({color:this.settings.itemTextColor,backgroundColor:this.settings.itemBgColor,borderColor:this.settings.itemBorderColor,borderStyle:this.settings.itemBorderStyle}),t.children(".ditty-item__elements").css(this.settings.itemPadding),t.children(".ditty-item__elements").css(this.settings.itemBorderRadius),t.children(".ditty-item__elements").css(this.settings.itemBorderWidth),t.css({paddingBottom:this.settings.spacing+"px"})},_createPage:function(t){var i=this,e=$('<div class="ditty-list__page ditty-list__page--'+t+'"></div>'),s=this._getItemsByPageIndex(t);return $.each(s,(function(t,s){var n=$(s.html);i._styleItem(n),s.css&&dittyLayoutCss(s.css,s.layout_id),e.append(n)})),e.children().last().css({paddingBottom:0}),{id:"page"+parseInt(t+1),html:e,items:s}},_calculatePages:function(){var t=this,i=[];$.each(this.settings.items,(function(e,s){t._isItemEnabled(e)&&i.push(s)})),this.enabledItems=i,this.total=i.length,parseInt(this.settings.paging)&&parseInt(this.settings.perPage)>0?this.totalPages=Math.ceil(parseInt(this.total)/parseInt(this.settings.perPage)):this.totalPages=1,this.pages=[];for(var e=0;e<this.totalPages;e++)this.pages.push(this._createPage(e))},_getPageByItemIndex:function(t){return Math.ceil((parseInt(t)+1)/this.settings.perPage)-1},_getItemsByPageIndex:function(t){var i=this.enabledItems;if(parseInt(this.totalPages)>1){var e=parseInt(this.settings.perPage)*t,s=e+parseInt(this.settings.perPage);i=this.enabledItems.slice(e,s)}return i},shuffle:function(){for(var t,i,e=this.total-1;e>0;e--)i=Math.floor(Math.random()*(e+1)),t=this.settings.items[e],this.settings.items[e]=this.settings.items[i],this.settings.items[i]=t},_isItemEnabled:function(t){return void 0!==this.settings.items[parseInt(t)]&&(void 0===this.settings.items[parseInt(t)].is_disabled||!(this.settings.items[parseInt(t)].is_disabled.length>0))},_disabledItemsStatus:function(){var t=this,i={};return $.each(this.settings.items,(function(e,s){t._isItemEnabled(e)?i[s.id]="enabled":i[s.id]="disabled"})),i},addItemDisabled:function(t,i){var e=this;$.each(this.settings.items,(function(s,n){String(n.id)===String(t)&&($.isArray(e.settings.items[s].is_disabled)||(e.settings.items[s].is_disabled=[]),e.settings.items[s].is_disabled.push(i))})),this.updateItems(this.settings.items),this.trigger("disabled_items_update")},removeItemDisabled:function(t,i){var e=this;$.each(this.settings.items,(function(s,n){String(n.id)===String(t)&&$.isArray(e.settings.items[s].is_disabled)&&e.settings.items[s].is_disabled.length&&(e.settings.items[s].is_disabled=$.grep(e.settings.items[s].is_disabled,(function(t){return t!==i})))})),this.updateItems(this.settings.items),this.trigger("disabled_items_update")},showItem:function(t){var i=[];if($.each(this.settings.items,(function(e,s){String(s.id)===String(t)&&i.push(e)})),0!==i.length){var e=this._getPageByItemIndex(parseInt(i[0]));this.$elmt.ditty_slider("showSlide",e)}},addItem:function(t,i,e){var s=this.settings.items.slice(),n=!0;(i>=this.total||i<0)&&(n=!1),"replace"===e&&n?s.splice(i,1,t):null===i||""===i?s.splice(parseInt(this.item)+1,0,t):i>=this.total?s.push(t):i<0?s.splice(0,0,t):s.splice(i,0,t),this.updateItems(s)},deleteItem:function(t){var i=[];$.each(this.settings.items,(function(e,s){String(s.id)!==String(t)&&i.push(s)})),this.updateItems(i)},updateItems:function(t,i,e,s){if(void 0===t)return!1;var n=this,a=this.$elmt.ditty_slider("options","slide"),r=[];if(i){var d=this.settings.items.slice(),l=[],h=!1;$.each(d,(function(s,n){String(n.id)===String(i)?"after"===e?(l.push(n),$.each(t,(function(t,i){l.push(i)})),h=!0):"before"===e?($.each(t,(function(t,i){l.push(i)})),l.push(n),h=!0):h||($.each(t,(function(t,i){l.push(i),r.push(String(i.uniq_id))})),h=!0):l.push(n)})),h||($.each(this.settings.items,(function(t,i){l.push(i)})),h=!0),t=l}this.settings.items=t,this.total=t.length,this._calculatePages(),this.$elmt.ditty_slider("options","slides",this.pages);var o=this.$elmt.ditty_slider("options","currentSlide"),g=o.children(".ditty-item"),m=this.$elmt.ditty_slider("options","slide"),c=[];if(a!==m)return!1;var p,u=0,_=null,f=-1,y=[];this.pages[m]&&(p=this.pages[m].items,u=p.length,$.each(p,(function(t,i){var e=$(i.html);if(i.css&&dittyLayoutCss(i.css,i.layout_id),n._styleItem(e),t===u-1&&e.css({paddingBottom:0}),g[t]){var a=$(g[t]);_=a,y.push(t),(s||String(a.data("item_uniq_id"))!==String(i.uniq_id)||r.includes(String(i.uniq_id)))&&c.push({currentItem:a,newItem:e})}else{var d=$('<div class="ditty-temp-item"></div>');o.append(d),c.push({currentItem:d,newItem:e}),f=parseInt(n.settings.spacing)}}))),$.each(g,(function(t){if(!y.includes(t)){var i=$(g[t]),e=$('<div class="ditty-temp-item"></div>');c.push({currentItem:i,newItem:e}),f=0}})),null!==_&&f>=0&&_.css({paddingBottom:f+"px"}),dittyUpdateItems(c),this.trigger("update")},getActiveItems:function(){return this._getItemsByPageIndex(this.page)},_triggerInit:function(t){t.data.self.trigger("init")},_triggerUpdate:function(t){t.data.self.trigger("update")},_triggerShowSlide:function(t,i){var e=t.data.self;e.page=i,e.trigger("active_items_update")},trigger:function(t){var i=[];switch(t){case"active_items_update":i=[this,this.getActiveItems()];break;case"disabled_items_update":i=[this._disabledItemsStatus()];break;case"start_live_updates":i=[this.settings.id];break;default:i=[this.settings,this.$elmt]}this.$elmt.trigger("ditty_"+t,i),"function"==typeof this.settings[t]&&this.settings[t].apply(this.$elmt,i),$("body").trigger("ditty_"+t,i)},_getOption:function(t){switch(t){case"ditty":return this;case"type":return this.displayType;case"display":return this.settings.display;case"items":return this.settings.items;default:return this.settings[t]}},_setOption:function(t,i){if(void 0===i)return!1;var e=t,s=i,n=!0,a=this;switch(t){case"items":n=!1,this.updateItems(i);break;case"perPage":case"paging":n=!1,this.settings[t]=i,this.updateItems(this.settings.items);break;case"spacing":this.settings[t]=i,this.$elmt.find(".ditty-item").each((function(){$(this).css({paddingBottom:a.settings.spacing+"px"})})),this.$elmt.find(".ditty-list__page").each((function(){$(this).children(".ditty-item:last-child").css({paddingBottom:0})}));break;case"itemTextColor":case"itemBgColor":case"itemBorderColor":case"itemBorderStyle":case"itemBorderWidth":case"itemBorderRadius":case"itemPadding":this.settings[t]=i,this.$elmt.find(".ditty-item").each((function(){a._styleItem($(this))}));break;default:this.settings[t]=i}n&&(e=e.replace("page","slide"),this.$elmt.ditty_slider("options",e,s))},options:function(t,i){var e=this;if("object"==typeof t)$.each(t,(function(t,i){e._setOption(t,i)}));else{if("string"!=typeof t)return e.settings;if(void 0===i)return e._getOption(t);e._setOption(t,i)}},destroy:function(){this._destroySlider(),this.$elmt.removeClass("ditty ditty-list"),this.$elmt.removeAttr("data-id"),this.$elmt.removeAttr("data-type"),this.$elmt.removeAttr("data-display"),this.$elmt.removeAttr("style"),this.$elmt.empty(),this.elmt._ditty_list=null}},$.fn.ditty_list=function(t){var e,s=arguments,n=!1;if(void 0===t||"object"==typeof t)return this.each((function(){this._ditty_list||(this._ditty_list=new i(this,t))}));if("string"==typeof t){if(this.each((function(){var i=this._ditty_list;if(!i)throw new Error("No Ditty_List applied to this element.");"function"==typeof i[t]&&"_"!==t[0]?e=i[t].apply(i,[].slice.call(s,1)):n=!0})),n)throw new Error('No method "'+t+'" in Ditty_List.');return void 0!==e?e:this}},$.ditty_list={},$.ditty_list.defaults=t}(jQuery);