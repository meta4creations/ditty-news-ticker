function dittyLayoutCss(t,a,e){var i=jQuery("style#ditty-layout--"+a);void 0===i[0]&&(i=jQuery('<style id="ditty-layout--'+a+'"></style>'),jQuery("head").append(i),e="update"),"update"===e&&(t=t.replace("&gt;",">"),i.html(t))}function dittyDisplayCss(t,a){var e=jQuery("style#ditty-display--"+a);void 0===e[0]&&(e=jQuery('<style id="ditty-display--'+a+'"></style>'),jQuery("head").append(e)),t=t.replace("&gt;",">"),e.html(t)}function dittyGetUpdatedItemData(t,a){const e=a.reduce(((t,a)=>{const e=t.findIndex((t=>t.id===a.id));return a.updated="updated",e<0?t.push({id:a.id,items:[a]}):t[e].items.push(a),t}),[]).reduce(((t,a)=>[...t,...a.items]),[]),i=[];return{updatedItems:e.map(((a,e)=>(a.updated?(i.push(e),delete a.updated):(void 0===t[e]||String(t[e].uniq_id)!==String(a.uniq_id))&&i.push(e),a))),updatedIndexes:i}}function dittyUpdateItems(t,a="animate"){jQuery.each(t,(function(t,e){var i=e.currentItem,d=e.newItem,s=i.parent();if("static"===a)i.after(d),i.remove();else{var o=d.attr("style");i.wrap('<div class="ditty-update-wrapper" style="position: relative;overflow: hidden;"></div>'),s.stop().css({height:i.outerHeight()}),i.stop().css({position:"absolute",top:0,left:0,width:"100%"}),d.stop().css({position:"absolute",top:0,left:0,width:"100%",opacity:0}),i.after(d),i.stop().animate({opacity:0},375,"linear"),d.stop().animate({opacity:1},375,"linear"),s.stop().animate({height:d.outerHeight()},500,"easeOutQuint",(function(){s.removeAttr("style"),i.unwrap(),i.remove(),o?d.attr("style",o):d.removeAttr("style"),d.hasClass("ditty-temp-item")&&d.remove()}))}}))}jQuery((function($){!function(){"use strict";var t={},a=null;function e(){var a={action:"ditty_live_updates",live_ids:t,security:dittyVars.security};$.post(dittyVars.ajaxurl,a,(function(a){a.updated_items&&$.each(a.updated_items,(function(a,e){!function(t,a){$('.ditty[data-id="'+t+'"]').each((function(){var e=$(this).data("type");"development"===dittyVars.mode&&window.console&&console.log(`LIVE UPDATE: ${t}`),$(this)["ditty_"+e]("options","items",a)}))}(a,e),t[a].timestamp=Math.floor($.now()/1e3)}))}),"json")}function i(){if(null!==a||1>Object.keys(t).length)return!1;cancelAnimationFrame(a);var i=dittyVars.updateInterval?parseInt(dittyVars.updateInterval):60,d=Date.now();a=requestAnimationFrame((function t(){var s=Date.now();Math.floor((s-d)/1e3)>=i&&(d=s,e()),a=requestAnimationFrame(t)}))}$.each(dittyVars.globals,(function(t,a){var e=$(a.selector);if(a.ditty&&void 0!==e[0]){var i=a.edit_links?a.edit_links:"",d=$('<div class="ditty" data-id="'+a.ditty+'" data-ajax_load="1">'+i+"</div>");switch(a.display&&""!==a.display&&d.attr("data-display",a.display),a.live_updates&&"1"===String(a.live_updates)&&d.attr("data-live_updates","1"),a.custom_id&&""!==a.custom_id&&d.attr("id",a.custom_id),a.custom_classes&&""!==a.custom_classes&&d.addClass(a.custom_classes),a.position){case"prepend":$(e[0]).prepend(d);break;case"before":$(e[0]).before(d);break;case"after":$(e[0]).after(d);break;default:$(e[0]).append(d)}}})),$(".ditty").each((function(){var a=$(this),e=!!a.data("ajax_load")&&a.data("ajax_load"),d=!!a.data("live_updates")&&a.data("live_updates"),s=!!a.data("display_settings")&&a.data("display_settings"),o=!!a.data("layout_settings")&&a.data("layout_settings"),n=!!a.data("show_editor")&&a.data("show_editor");if(e){var r={action:"ditty_init",id:!!a.data("id")&&a.data("id"),uniqid:!!a.data("uniqid")&&a.data("uniqid"),display:a.data("display")?a.data("display"):"",display_settings:s,layout_settings:o,editor:n,security:dittyVars.security};$.post(dittyVars.ajaxurl,r,(function(e){if(!e.display_type||"function"!=typeof a["ditty_"+e.display_type])return window.console&&console.log("Ditty Display type not loaded:",e.display_type),!1;a["ditty_"+e.display_type](e.args),!n&&d&&(t[a.data("id")]={timestamp:Math.floor($.now()/1e3),layout_settings:o},i())}),"json")}else!n&&d&&(t[a.data("id")]={timestamp:Math.floor($.now()/1e3),layout_settings:o},i())}))}()}));