function dittyLayoutCss(t,a,e){var i=jQuery("style#ditty-layout--"+a);void 0===i[0]&&(i=jQuery('<style id="ditty-layout--'+a+'"></style>'),jQuery("head").append(i),e="update"),"update"===e&&(t=t.replace("&gt;",">"),i.html(t))}function dittyDisplayCss(t,a){var e=jQuery("style#ditty-display--"+a);void 0===e[0]&&(e=jQuery('<style id="ditty-display--'+a+'"></style>'),jQuery("head").append(e)),t=t.replace("&gt;",">"),e.html(t)}function dittyOrderItemGroup(t,a){const e=a.orderby?a.orderby:"default",i=a.order?a.order:"desc";let s=t;switch(e){case"timestamp":s=t.sort(((t,a)=>new Date(a.timestamp_iso)-new Date(t.timestamp_iso)));break;case"random":for(let t=s.length-1;t>0;t--){const a=Math.floor(Math.random()*(t+1)),e=s[t];s[t]=s[a],s[a]=e}}return"asc"===i&&s.reverse(),s}function dittyOrderItems(t,a){const e=[],i=[];t.map((t=>{t.parent_id&&"0"!==String(t.parent_id)?(i[t.parent_id]||(i[t.parent_id]=[]),i[t.parent_id].push(t)):e.push(t)}));const s=dittyOrderItemGroup(e,a),d=i.map((t=>dittyOrderItemGroup(t,a)));return s.reduce(((t,a)=>(t.push(a),d[a.id]&&(t=[...t,...d[a.id]]),t)),[])}function dittyGetUpdatedItemData(t,a){const e=[];return{updatedItems:a.map(((a,i)=>((void 0===t[i]||String(t[i].uniq_id)!==String(a.uniq_id)||String(t[i].html)!==String(a.html))&&e.push(i),a))),updatedIndexes:e}}function dittyUpdateItems(t,a="animate"){jQuery.each(t,(function(t,e){var i=e.currentItem,s=e.newItem,d=i.parent();if("static"===a)i.after(s),i.remove();else{var o=s.attr("style");i.wrap('<div class="ditty-update-wrapper" style="position: relative;overflow: hidden;"></div>'),d.stop().css({height:i.outerHeight()}),i.stop().css({position:"absolute",top:0,left:0,width:"100%"}),s.stop().css({position:"absolute",top:0,left:0,width:"100%",opacity:0}),i.after(s),i.stop().animate({opacity:0},375,"linear"),s.stop().animate({opacity:1},375,"linear"),d.stop().animate({height:s.outerHeight()},500,"easeOutQuint",(function(){d.removeAttr("style"),i.unwrap(),i.remove(),o?s.attr("style",o):s.removeAttr("style"),s.hasClass("ditty-temp-item")&&s.remove()}))}}))}jQuery((function($){!function(){"use strict";var t={},a=null;function e(){var a={action:"ditty_live_updates",live_ids:t,security:dittyVars.security};$.post(dittyVars.ajaxurl,a,(function(a){a.updated_items&&$.each(a.updated_items,(function(a,e){!function(t,a){$('.ditty[data-id="'+t+'"]').each((function(){var e=$(this).data("type");"development"===dittyVars.mode&&window.console&&console.log(`LIVE UPDATE: ${t}`),$(this)[`ditty_${e}`]("loadItems",a,"static")}))}(a,e),t[a].timestamp=Math.floor($.now()/1e3)}))}),"json")}function i(){if(null!==a||1>Object.keys(t).length)return!1;cancelAnimationFrame(a);var i=dittyVars.updateInterval?parseInt(dittyVars.updateInterval):60,s=Date.now();a=requestAnimationFrame((function t(){var d=Date.now();Math.floor((d-s)/1e3)>=i&&(s=d,e()),a=requestAnimationFrame(t)}))}$.each(dittyVars.globals,(function(t,a){var e=$(a.selector);if(a.ditty&&void 0!==e[0]){var i=a.edit_links?a.edit_links:"",s=$('<div class="ditty" data-id="'+a.ditty+'" data-ajax_load="1">'+i+"</div>");switch(a.display&&""!==a.display&&s.attr("data-display",a.display),a.live_updates&&"1"===String(a.live_updates)&&s.attr("data-live_updates","1"),a.custom_id&&""!==a.custom_id&&s.attr("id",a.custom_id),a.custom_classes&&""!==a.custom_classes&&s.addClass(a.custom_classes),a.position){case"prepend":$(e[0]).prepend(s);break;case"before":$(e[0]).before(s);break;case"after":$(e[0]).after(s);break;default:$(e[0]).append(s)}}})),$(".ditty").each((function(){var a=$(this),e=!!a.data("ajax_load")&&a.data("ajax_load"),s=!!a.data("live_updates")&&a.data("live_updates"),d=!!a.data("display_settings")&&a.data("display_settings"),o=!!a.data("layout_settings")&&a.data("layout_settings"),r=!!a.data("show_editor")&&a.data("show_editor");if(e){var n={action:"ditty_init",id:!!a.data("id")&&a.data("id"),uniqid:!!a.data("uniqid")&&a.data("uniqid"),display:a.data("display")?a.data("display"):"",display_settings:d,layout_settings:o,editor:r,security:dittyVars.security};$.post(dittyVars.ajaxurl,n,(function(e){if(!e.display_type||"function"!=typeof a["ditty_"+e.display_type])return window.console&&console.log("Ditty Display type not loaded:",e.display_type),!1;a["ditty_"+e.display_type](e.args),!r&&s&&(t[a.data("id")]={timestamp:Math.floor($.now()/1e3),layout_settings:o},i())}),"json")}else!r&&s&&(t[a.data("id")]={timestamp:Math.floor($.now()/1e3),layout_settings:o},i())}))}()}));