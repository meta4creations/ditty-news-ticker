function dittyLayoutCss(t,e,a){var i=jQuery("style#ditty-layout--"+e);void 0===i[0]&&(i=jQuery('<style id="ditty-layout--'+e+'"></style>'),jQuery("head").append(i),a="update"),"update"===a&&(t=t.replace("&gt;",">"),i.html(t))}function dittyDisplayCss(t,e){var a=jQuery("style#ditty-display--"+e);void 0===a[0]&&(a=jQuery('<style id="ditty-display--'+e+'"></style>'),jQuery("head").append(a)),t=t.replace("&gt;",">"),a.html(t)}function dittyGetUpdatedItemData(t,e,a="replace"){const i=t.reduce(((t,e)=>{const a=t.findIndex((t=>t.id===e.id));return a<0?t.push({id:e.id,items:[e]}):t[a].items.push(e),t}),[]),d=e.reduce(((t,e)=>{const a=t.findIndex((t=>t.id===e.id));return e.updated="updated",a<0?t.push({id:e.id,items:[e]}):t[a].items.push(e),t}),[]);let s;if("update"===a){const t=d.reduce(((t,e)=>{const a=t.findIndex((t=>t.id===e.id));return a<0?t.push(e):t[a]=e,t}),i);s=t.reduce(((t,e)=>[...t,...e.items]),[])}else s=d.reduce(((t,e)=>[...t,...e.items]),[]);const n=[];return{updatedItems:s.map(((e,a)=>(e.updated?(n.push(a),delete e.updated):(void 0===t[a]||String(t[a].uniq_id)!==String(e.uniq_id))&&n.push(a),e))),updatedIndexes:n}}function dittyUpdateItems(t){jQuery.each(t,(function(t,e){var a=e.currentItem,i=e.newItem;a.wrap('<div class="ditty-update-wrapper" style="position: relative;overflow: hidden;"></div>');var d=a.parent(),s=i.attr("style");d.stop().css({height:a.outerHeight()}),a.stop().css({position:"absolute",top:0,left:0,width:"100%"}),i.stop().css({position:"absolute",top:0,left:0,width:"100%",opacity:0}),a.after(i),a.stop().animate({opacity:0},375,"linear"),i.stop().animate({opacity:1},375,"linear"),d.stop().animate({height:i.outerHeight()},500,"easeOutQuint",(function(){d.removeAttr("style"),a.unwrap(),a.remove(),s?i.attr("style",s):i.removeAttr("style"),i.hasClass("ditty-temp-item")&&i.remove()}))}))}jQuery((function($){!function(){"use strict";var t={},e=null;function a(){var e={action:"ditty_live_updates",live_ids:t,security:dittyVars.security};$.post(dittyVars.ajaxurl,e,(function(e){e.updated_items&&$.each(e.updated_items,(function(e,a){!function(t,e){$('.ditty[data-id="'+t+'"]').each((function(){var a=$(this).data("type");"development"===dittyVars.mode&&window.console&&console.log(`LIVE UPDATE: ${t}`),$(this)["ditty_"+a]("options","items",e)}))}(e,a),t[e].timestamp=Math.floor($.now()/1e3)}))}),"json")}function i(){if(null!==e||1>Object.keys(t).length)return!1;cancelAnimationFrame(e);var i=dittyVars.updateInterval?parseInt(dittyVars.updateInterval):60,d=Date.now();e=requestAnimationFrame((function t(){var s=Date.now();Math.floor((s-d)/1e3)>=i&&(d=s,a()),e=requestAnimationFrame(t)}))}$.each(dittyVars.globals,(function(t,e){var a=$(e.selector);if(e.ditty&&void 0!==a[0]){var i=e.edit_links?e.edit_links:"",d=$('<div class="ditty" data-id="'+e.ditty+'" data-ajax_load="1">'+i+"</div>");switch(e.display&&""!==e.display&&d.attr("data-display",e.display),e.live_updates&&"1"===String(e.live_updates)&&d.attr("data-live_updates","1"),e.custom_id&&""!==e.custom_id&&d.attr("id",e.custom_id),e.custom_classes&&""!==e.custom_classes&&d.addClass(e.custom_classes),e.position){case"prepend":$(a[0]).prepend(d);break;case"before":$(a[0]).before(d);break;case"after":$(a[0]).after(d);break;default:$(a[0]).append(d)}}})),$(".ditty").each((function(){var e=$(this),a=!!e.data("ajax_load")&&e.data("ajax_load"),d=!!e.data("live_updates")&&e.data("live_updates"),s=!!e.data("display_settings")&&e.data("display_settings"),n=!!e.data("layout_settings")&&e.data("layout_settings"),o=!!e.data("show_editor")&&e.data("show_editor");if(a){var r={action:"ditty_init",id:!!e.data("id")&&e.data("id"),uniqid:!!e.data("uniqid")&&e.data("uniqid"),display:e.data("display")?e.data("display"):"",display_settings:s,layout_settings:n,editor:o,security:dittyVars.security};$.post(dittyVars.ajaxurl,r,(function(a){if(!a.display_type||"function"!=typeof e["ditty_"+a.display_type])return window.console&&console.log("Ditty Display type not loaded:",a.display_type),!1;e["ditty_"+a.display_type](a.args),!o&&d&&(t[e.data("id")]={timestamp:Math.floor($.now()/1e3),layout_settings:n},i())}),"json")}else!o&&d&&(t[e.data("id")]={timestamp:Math.floor($.now()/1e3),layout_settings:n},i())}))}()}));